<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auxeira ESG Education Impact Donor Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <style>
        :root {
            --terminal-dark: #0a0a0a;
            --terminal-darker: #050505;
            --terminal-blue: #00d4ff;
            --terminal-purple: #8b5cf6;
            --terminal-green: #00ff88;
            --terminal-gold: #ffd700;
            --terminal-white: #ffffff;
            --terminal-gray: #666666;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--terminal-dark) 0%, var(--terminal-darker) 100%);
            color: var(--terminal-white);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .terminal-header {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--terminal-blue), var(--terminal-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .profile-completion {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .profile-completion:hover {
            background: var(--terminal-blue);
            color: var(--terminal-dark);
        }

        .data-refresh {
            font-size: 0.8rem;
            opacity: 0.7;
            color: var(--terminal-green);
        }

        .main-container {
            display: flex;
            min-height: calc(100vh - 80px);
        }

        .sidebar {
            width: 280px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--glass-border);
            padding: 2rem 0;
            position: sticky;
            top: 80px;
            height: calc(100vh - 80px);
            overflow-y: auto;
        }

        .nav-item {
            padding: 1rem 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-item:hover, .nav-item.active {
            background: var(--glass-bg);
            border-left-color: var(--terminal-blue);
            color: var(--terminal-blue);
        }

        .content-area {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.1);
        }

        .hero-impact {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(135deg, var(--terminal-blue), var(--terminal-purple));
            border-radius: 20px;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .hero-impact::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .impact-number {
            font-size: 4rem;
            font-weight: bold;
            color: var(--terminal-white);
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .impact-label {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-top: 0.5rem;
        }

        .story-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .story-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .story-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(45deg, var(--terminal-blue), var(--terminal-purple));
        }

        .story-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(139, 92, 246, 0.2);
        }

        .story-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: var(--terminal-blue);
        }

        .story-content {
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .story-metrics {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid var(--glass-border);
        }

        .metric-item {
            text-align: center;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--terminal-green);
        }

        .metric-label {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .badge-icon {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            opacity: 0.7;
        }

        .badge-leaf { color: var(--terminal-green); }
        .badge-rocket { color: var(--terminal-gold); }
        .badge-handshake { color: var(--terminal-purple); }

        .chart-container {
            background: var(--glass-bg);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
        }

        .chart-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: var(--terminal-blue);
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--terminal-blue), var(--terminal-purple));
            border: none;
            border-radius: 25px;
            padding: 0.8rem 2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 212, 255, 0.3);
        }

        .btn-premium {
            background: linear-gradient(45deg, var(--terminal-gold), #ff6b35);
            border: none;
            border-radius: 25px;
            padding: 0.8rem 2rem;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-premium::before {
            content: 'ðŸ‘‘';
            margin-right: 0.5rem;
        }

        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.3);
        }

        .premium-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 16px;
            z-index: 10;
        }

        .premium-lock {
            font-size: 3rem;
            color: var(--terminal-gold);
            margin-bottom: 1rem;
        }

        .premium-text {
            text-align: center;
            margin-bottom: 2rem;
        }

        .opportunity-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .opportunity-card:hover {
            transform: translateX(10px);
            border-color: var(--terminal-blue);
        }

        .opportunity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .opportunity-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--terminal-blue);
        }

        .compatibility-score {
            background: var(--terminal-green);
            color: var(--terminal-dark);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .opportunity-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .opportunity-metric {
            text-align: center;
        }

        .opportunity-metric-value {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--terminal-white);
        }

        .opportunity-metric-label {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .portfolio-item {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .portfolio-item:hover {
            transform: scale(1.02);
            box-shadow: 0 15px 30px rgba(0, 212, 255, 0.1);
        }

        .portfolio-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .company-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--terminal-blue);
        }

        .health-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--terminal-green);
        }

        .health-indicator.warning {
            background: var(--terminal-gold);
        }

        .health-indicator.danger {
            background: #ff4757;
        }

        .portfolio-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        .rank-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--terminal-gold);
            margin-right: 1rem;
            min-width: 40px;
        }

        .rank-change {
            margin-left: auto;
            font-size: 1.2rem;
        }

        .rank-up {
            color: var(--terminal-green);
        }

        .rank-down {
            color: #ff4757;
        }

        .rank-same {
            color: var(--terminal-gray);
        }

        .collaboration-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }

        .collaboration-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(139, 92, 246, 0.2);
        }

        .collab-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .collab-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--terminal-purple);
        }

        .alignment-score {
            background: var(--terminal-purple);
            color: var(--terminal-white);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .report-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .report-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .report-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.1);
        }

        .report-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--terminal-blue);
            margin-bottom: 1rem;
        }

        .report-description {
            line-height: 1.6;
            margin-bottom: 1.5rem;
            opacity: 0.9;
        }

        .report-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--terminal-gold);
            margin-bottom: 1rem;
        }

        .calendar-widget {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .calendar-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .calendar-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--terminal-purple);
        }

        .event-item {
            display: flex;
            align-items: center;
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 8px;
            border-left: 3px solid var(--terminal-purple);
        }

        .event-date {
            font-size: 0.8rem;
            color: var(--terminal-purple);
            margin-right: 1rem;
            min-width: 60px;
        }

        .event-title {
            font-weight: bold;
            flex: 1;
        }

        .network-insights {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .insights-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .insights-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--terminal-blue);
        }

        .insight-metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem 0;
            border-bottom: 1px solid var(--glass-border);
        }

        .insight-metric:last-child {
            border-bottom: none;
        }

        .insight-label {
            font-weight: 500;
        }

        .insight-value {
            font-weight: bold;
            color: var(--terminal-green);
        }

        .modal {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: var(--terminal-dark);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            color: var(--terminal-white);
        }

        .modal-header {
            border-bottom: 1px solid var(--glass-border);
        }

        .modal-footer {
            border-top: 1px solid var(--glass-border);
        }

        .form-control {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--terminal-white);
            border-radius: 8px;
        }

        .form-control:focus {
            background: var(--glass-bg);
            border-color: var(--terminal-blue);
            color: var(--terminal-white);
            box-shadow: 0 0 0 0.2rem rgba(0, 212, 255, 0.25);
        }

        .form-select {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--terminal-white);
        }

        .form-select:focus {
            background: var(--glass-bg);
            border-color: var(--terminal-blue);
            color: var(--terminal-white);
            box-shadow: 0 0 0 0.2rem rgba(0, 212, 255, 0.25);
        }

        .progress {
            background: var(--glass-bg);
            border-radius: 10px;
            height: 8px;
        }

        .progress-bar {
            background: linear-gradient(45deg, var(--terminal-blue), var(--terminal-purple));
            border-radius: 10px;
        }

        .time-toggle {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            justify-content: center;
        }

        .time-toggle button {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--terminal-white);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .time-toggle button.active {
            background: var(--terminal-blue);
            color: var(--terminal-dark);
        }

        .time-toggle button:hover {
            background: var(--terminal-blue);
            color: var(--terminal-dark);
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                height: auto;
                position: static;
                order: 2;
            }

            .content-area {
                order: 1;
                padding: 1rem;
            }

            .terminal-header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .user-info {
                width: 100%;
                justify-content: space-between;
            }

            .story-grid, .portfolio-grid, .report-grid {
                grid-template-columns: 1fr;
            }

            .impact-number {
                font-size: 2.5rem;
            }
        }

        /* High contrast mode for accessibility */
        @media (prefers-contrast: high) {
            :root {
                --glass-bg: rgba(255, 255, 255, 0.15);
                --glass-border: rgba(255, 255, 255, 0.3);
            }
        }

        /* Reduced motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- Terminal Header -->
    <div class="terminal-header">
        <div class="logo">
            <i class="fas fa-chart-line"></i> Auxeira ESG Education
        </div>
        <div class="user-info">
            <div class="profile-completion" onclick="showProfileModal()" aria-label="Profile completion status">
                <i class="fas fa-user-circle"></i>
                Profile: 65% Complete
                <div class="progress mt-1">
                    <div class="progress-bar" style="width: 65%" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            <div class="data-refresh">
                <i class="fas fa-sync-alt"></i>
                Data Refreshed: <span id="lastUpdate" data-bind="last_update">2 hours ago</span>
            </div>
            <div class="time-toggle" style="display: none;" id="timeToggle">
                <button class="active" onclick="toggleTimeRange(365)" aria-label="Show 365 day data">365 Days</button>
                <button onclick="toggleTimeRange(1825)" aria-label="Show 5 year data">5 Years</button>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <div class="nav-item active" onclick="showTab('overview')" aria-label="Overview dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Overview</span>
            </div>
            <div class="nav-item" onclick="showTab('opportunity-ripple')" aria-label="Opportunity ripple dashboard">
                <i class="fas fa-handshake"></i>
                <span>Opportunity Ripple</span>
            </div>
            <div class="nav-item" onclick="showTab('portfolio')" aria-label="Portfolio dashboard">
                <i class="fas fa-briefcase"></i>
                <span>Portfolio</span>
            </div>
            <div class="nav-item" onclick="showTab('leaderboard')" aria-label="Leaderboard dashboard">
                <i class="fas fa-trophy"></i>
                <span>Leaderboard</span>
            </div>
            <div class="nav-item" onclick="showTab('collaboration')" aria-label="Collaboration zone dashboard">
                <i class="fas fa-users"></i>
                <span>Collaboration Zone</span>
            </div>
            <div class="nav-item" onclick="showTab('reports')" aria-label="Reports dashboard">
                <i class="fas fa-file-alt"></i>
                <span>Reports</span>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <!-- Hero Impact Section -->
                <div class="hero-impact">
                    <div class="hero-content">
                        <div class="impact-number" data-bind="students_reached | number" aria-label="Total students reached">285,000</div>
                        <div class="impact-label">Lives Transformed Through Education</div>
                        <div class="mt-3">
                            <span style="font-size: 1.1rem; opacity: 0.9;">
                                Your <span data-bind="total_investment | currency">R2.4M</span> Investment â€¢ 
                                <span data-bind="lives_per_grant | number">5.8</span>x Lives-per-Grant â€¢ 
                                <span data-bind="literacy_improvement | percentage">94%</span> Literacy Improvement
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Visual Analytics Section -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="chart-container">
                            <div class="chart-title">Students Reached by Region</div>
                            <canvas id="regionChart" aria-label="Bar chart showing students reached by region"></canvas>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="chart-container">
                            <div class="chart-title">Lives-per-Grant Trends (3 Years)</div>
                            <canvas id="livesPerGrantChart" aria-label="Line chart showing lives-per-grant trends over 3 years"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Overview Tab Reports -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="glass-card">
                            <h4 style="color: var(--terminal-blue);">
                                <i class="fas fa-expand-arrows-alt"></i> Scalability & Impact Expansion Report
                            </h4>
                            <p>Comprehensive analysis of scaling opportunities and impact multiplication strategies.</p>
                            <button class="btn btn-premium" onclick="showPremiumModal('scalability-report')">
                                Generate Report - $199
                            </button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="glass-card">
                            <h4 style="color: var(--terminal-green);">
                                <i class="fas fa-leaf"></i> ESG Scorecard
                            </h4>
                            <p>Detailed environmental, social, and governance performance metrics and benchmarks.</p>
                            <button class="btn btn-premium" onclick="showPremiumModal('esg-scorecard')">
                                View Scorecard - $149
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Impact Report Teaser -->
                <div class="glass-card">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 style="color: var(--terminal-blue);">
                            <i class="fas fa-heart"></i> Impact Report
                        </h3>
                        <span class="badge bg-warning text-dark">Premium Feature</span>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <p class="mb-3">Are you maximizing learning outcomes? Our Impact Report reveals untapped opportunities in your education portfolio, mapping clear actionable strategies for 2024.</p>
                            <div class="mb-3">
                                <strong>What's New:</strong> 
                                <ul class="mt-2">
                                    <li><span data-bind="new_partnerships">12</span> new partnership opportunities identified</li>
                                    <li><span data-bind="underperforming_programs">3</span> underperforming programs with <span data-bind="improvement_potential | percentage">40%</span> improvement potential</li>
                                    <li>Regional expansion into <span data-bind="expansion_region">Nigeria</span> showing <span data-bind="expansion_roi | percentage">200%</span> Lives-per-Grant potential</li>
                                </ul>
                            </div>
                            <div class="mb-3">
                                <strong>What's Next:</strong> Strategic recommendations for Q1 2024 based on UNESCO frameworks and real-time policy changes.
                            </div>
                        </div>
                        <div class="col-md-4 text-center">
                            <div style="filter: blur(3px); opacity: 0.7;">
                                <canvas id="previewChart" width="200" height="150" aria-label="Blurred preview chart"></canvas>
                            </div>
                            <button class="btn btn-premium mt-3" onclick="showPremiumModal('impact-report')">
                                Unlock Full Report - $149
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Living Stories Grid -->
                <div class="story-grid">
                    <div class="story-card" onclick="playStoryAudio('nomsa')" aria-label="Nomsa's teaching revolution story">
                        <div class="badge-icon badge-leaf"><i class="fas fa-leaf"></i></div>
                        <div class="story-title" data-bind="story_title_1">Gates Foundation Empowers Nomsa's Teaching Revolution in South Africa</div>
                        <div class="story-content" data-bind="story_content_1">
                            From a rural classroom with 45 students and no electricity, Nomsa Mthembu transformed into a digital literacy champion. Through your education investment, she now trains 200+ teachers monthly using solar-powered tablets, reaching 12,000 students across KwaZulu-Natal.
                        </div>
                        <div class="story-metrics">
                            <div class="metric-item">
                                <div class="metric-value" data-bind="nomsa_students_reached | number">12,000</div>
                                <div class="metric-label">Students Reached</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="nomsa_teachers_trained | number">200+</div>
                                <div class="metric-label">Teachers Trained</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="nomsa_literacy_gain | percentage">85%</div>
                                <div class="metric-label">Literacy Gain</div>
                            </div>
                        </div>
                        <div class="mt-2 text-center">
                            <i class="fas fa-play-circle" style="color: var(--terminal-blue);"></i>
                            <small>Click to hear Nomsa's story</small>
                        </div>
                    </div>

                    <div class="story-card" onclick="playStoryAudio('stem-sisters')" aria-label="STEM Sisters story">
                        <div class="badge-icon badge-rocket"><i class="fas fa-rocket"></i></div>
                        <div class="story-title" data-bind="story_title_2">STEM Sisters: Breaking Barriers in Nigerian Tech Education</div>
                        <div class="story-content" data-bind="story_content_2">
                            In Lagos, 16-year-old Amina Yusuf leads a coding club of 150 girls. Your investment in gender-focused STEM education helped establish 25 similar clubs across Nigeria, with 89% of participants now pursuing tech careersâ€”a 340% increase from 2021.
                        </div>
                        <div class="story-metrics">
                            <div class="metric-item">
                                <div class="metric-value" data-bind="stem_girls_count | number">3,750</div>
                                <div class="metric-label">Girls in STEM</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="tech_career_rate | percentage">89%</div>
                                <div class="metric-label">Tech Career Rate</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="growth_rate | percentage">340%</div>
                                <div class="metric-label">Growth Rate</div>
                            </div>
                        </div>
                        <div class="mt-2 text-center">
                            <i class="fas fa-play-circle" style="color: var(--terminal-purple);"></i>
                            <small>Listen to Amina's journey</small>
                        </div>
                    </div>

                    <div class="story-card" onclick="playStoryAudio('climate-champions')" aria-label="Climate Champions story">
                        <div class="badge-icon badge-handshake"><i class="fas fa-handshake"></i></div>
                        <div class="story-title" data-bind="story_title_3">Climate Champions: Kenya's Green Education Revolution</div>
                        <div class="story-content" data-bind="story_content_3">
                            In Nairobi's Kibera slum, environmental science teacher James Kiprotich uses VR headsets to show students melting glaciers. His climate education program, funded through your ESG portfolio, now operates in 80 schools, training 15,000 young climate advocates.
                        </div>
                        <div class="story-metrics">
                            <div class="metric-item">
                                <div class="metric-value" data-bind="climate_advocates | number">15,000</div>
                                <div class="metric-label">Climate Advocates</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="schools_count | number">80</div>
                                <div class="metric-label">Schools</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="carbon_awareness | percentage">95%</div>
                                <div class="metric-label">Carbon Awareness</div>
                            </div>
                        </div>
                        <div class="mt-2 text-center">
                            <i class="fas fa-play-circle" style="color: var(--terminal-green);"></i>
                            <small>Experience James's impact</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Opportunity Ripple Tab -->
            <div id="opportunity-ripple" class="tab-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 style="color: var(--terminal-blue);">
                        <i class="fas fa-water"></i> Opportunity Ripple
                    </h2>
                    <div class="glass-card" style="margin: 0; padding: 1rem;">
                        <h5 style="color: var(--terminal-purple);">Fund Benchmarking & Screening Report</h5>
                        <button class="btn btn-premium btn-sm" onclick="showPremiumModal('fund-benchmarking')">
                            Generate Report - $299
                        </button>
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-md-4">
                        <div class="glass-card text-center">
                            <h3 data-bind="active_opportunities | number" style="color: var(--terminal-green);">24</h3>
                            <p>Active Opportunities</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="glass-card text-center">
                            <h3 data-bind="avg_compatibility | percentage" style="color: var(--terminal-blue);">94%</h3>
                            <p>Avg. Compatibility</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="glass-card text-center">
                            <h3 data-bind="total_funding_needed | currency">$12.8M</h3>
                            <p>Total Funding Needed</p>
                        </div>
                    </div>
                </div>

                <div class="opportunity-card" aria-label="EduTech Kenya opportunity">
                    <div class="badge-icon badge-leaf"><i class="fas fa-leaf"></i></div>
                    <div class="opportunity-header">
                        <div class="opportunity-title" data-bind="opportunity_1_name">EduTech Kenya - Digital Literacy Platform</div>
                        <div class="compatibility-score" data-bind="opportunity_1_compatibility | percentage">96%</div>
                    </div>
                    <div class="opportunity-details">
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_1_funding | currency">$2.5M</div>
                            <div class="opportunity-metric-label">Funding Goal</div>
                        </div>
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_1_students | number">50,000</div>
                            <div class="opportunity-metric-label">Students Impact</div>
                        </div>
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_1_lives_per_grant | number">8.2</div>
                            <div class="opportunity-metric-label">Lives-per-Grant</div>
                        </div>
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_1_timeline">18 months</div>
                            <div class="opportunity-metric-label">Timeline</div>
                        </div>
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-primary" onclick="exploreOpportunity('edutech-kenya')">Explore</button>
                        <button class="btn btn-outline-light" onclick="scheduleCall('edutech-kenya')">Schedule Call</button>
                    </div>
                </div>

                <div class="opportunity-card" aria-label="Girls Code Ghana opportunity">
                    <div class="badge-icon badge-rocket"><i class="fas fa-rocket"></i></div>
                    <div class="opportunity-header">
                        <div class="opportunity-title" data-bind="opportunity_2_name">Girls Code Ghana - STEM Empowerment</div>
                        <div class="compatibility-score" data-bind="opportunity_2_compatibility | percentage">94%</div>
                    </div>
                    <div class="opportunity-details">
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_2_funding | currency">$1.8M</div>
                            <div class="opportunity-metric-label">Funding Goal</div>
                        </div>
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_2_students | number">25,000</div>
                            <div class="opportunity-metric-label">Girls Impact</div>
                        </div>
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_2_lives_per_grant | number">7.8</div>
                            <div class="opportunity-metric-label">Lives-per-Grant</div>
                        </div>
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_2_timeline">24 months</div>
                            <div class="opportunity-metric-label">Timeline</div>
                        </div>
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-primary" onclick="exploreOpportunity('girls-code-ghana')">Explore</button>
                        <button class="btn btn-outline-light" onclick="scheduleCall('girls-code-ghana')">Schedule Call</button>
                    </div>
                </div>

                <div class="opportunity-card" aria-label="Climate Education Network opportunity">
                    <div class="badge-icon badge-handshake"><i class="fas fa-handshake"></i></div>
                    <div class="opportunity-header">
                        <div class="opportunity-title" data-bind="opportunity_3_name">Climate Education Network - Pan-African Initiative</div>
                        <div class="compatibility-score" data-bind="opportunity_3_compatibility | percentage">92%</div>
                    </div>
                    <div class="opportunity-details">
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_3_funding | currency">$4.2M</div>
                            <div class="opportunity-metric-label">Funding Goal</div>
                        </div>
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_3_students | number">100,000</div>
                            <div class="opportunity-metric-label">Students Impact</div>
                        </div>
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_3_lives_per_grant | number">9.1</div>
                            <div class="opportunity-metric-label">Lives-per-Grant</div>
                        </div>
                        <div class="opportunity-metric">
                            <div class="opportunity-metric-value" data-bind="opportunity_3_timeline">36 months</div>
                            <div class="opportunity-metric-label">Timeline</div>
                        </div>
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-primary" onclick="exploreOpportunity('climate-education')">Explore</button>
                        <button class="btn btn-outline-light" onclick="scheduleCall('climate-education')">Schedule Call</button>
                    </div>
                </div>
            </div>

            <!-- Portfolio Tab -->
            <div id="portfolio" class="tab-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 style="color: var(--terminal-blue);">
                        <i class="fas fa-briefcase"></i> Portfolio
                    </h2>
                    <div class="glass-card" style="margin: 0; padding: 1rem;">
                        <h5 style="color: var(--terminal-green);">Lives-per-Grant & Metrics Dashboard Report</h5>
                        <button class="btn btn-premium btn-sm" onclick="showPremiumModal('roi-metrics')">
                            Generate Report - $249
                        </button>
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="glass-card text-center">
                            <h3 data-bind="total_investments | number" style="color: var(--terminal-blue);">8</h3>
                            <p>Active Investments</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="glass-card text-center">
                            <h3 data-bind="portfolio_value | currency">$18.5M</h3>
                            <p>Portfolio Value</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="glass-card text-center">
                            <h3 data-bind="avg_lives_per_grant | number" style="color: var(--terminal-green);">6.8</h3>
                            <p>Avg Lives-per-Grant</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="glass-card text-center">
                            <h3 data-bind="total_beneficiaries | number">285,000</h3>
                            <p>Total Beneficiaries</p>
                        </div>
                    </div>
                </div>

                <div class="portfolio-grid">
                    <div class="portfolio-item" aria-label="EduTech Solutions portfolio item">
                        <div class="badge-icon badge-leaf"><i class="fas fa-leaf"></i></div>
                        <div class="portfolio-header">
                            <div class="company-name" data-bind="portfolio_1_name">EduTech Solutions</div>
                            <div class="health-indicator" data-bind="portfolio_1_health"></div>
                        </div>
                        <div class="portfolio-metrics">
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_1_investment | currency">$2.5M</div>
                                <div class="metric-label">Investment</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_1_lives_per_grant | number">7.2</div>
                                <div class="metric-label">Lives-per-Grant</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_1_beneficiaries | number">45,000</div>
                                <div class="metric-label">Beneficiaries</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_1_status">Active</div>
                                <div class="metric-label">Status</div>
                            </div>
                        </div>
                    </div>

                    <div class="portfolio-item" aria-label="STEM Academy portfolio item">
                        <div class="badge-icon badge-rocket"><i class="fas fa-rocket"></i></div>
                        <div class="portfolio-header">
                            <div class="company-name" data-bind="portfolio_2_name">STEM Academy Network</div>
                            <div class="health-indicator warning" data-bind="portfolio_2_health"></div>
                        </div>
                        <div class="portfolio-metrics">
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_2_investment | currency">$3.2M</div>
                                <div class="metric-label">Investment</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_2_lives_per_grant | number">6.1</div>
                                <div class="metric-label">Lives-per-Grant</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_2_beneficiaries | number">38,000</div>
                                <div class="metric-label">Beneficiaries</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_2_status">Growth</div>
                                <div class="metric-label">Status</div>
                            </div>
                        </div>
                    </div>

                    <div class="portfolio-item" aria-label="Climate Education portfolio item">
                        <div class="badge-icon badge-handshake"><i class="fas fa-handshake"></i></div>
                        <div class="portfolio-header">
                            <div class="company-name" data-bind="portfolio_3_name">Climate Education Initiative</div>
                            <div class="health-indicator" data-bind="portfolio_3_health"></div>
                        </div>
                        <div class="portfolio-metrics">
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_3_investment | currency">$1.8M</div>
                                <div class="metric-label">Investment</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_3_lives_per_grant | number">8.5</div>
                                <div class="metric-label">Lives-per-Grant</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_3_beneficiaries | number">52,000</div>
                                <div class="metric-label">Beneficiaries</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value" data-bind="portfolio_3_status">Mature</div>
                                <div class="metric-label">Status</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Leaderboard Tab -->
            <div id="leaderboard" class="tab-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 style="color: var(--terminal-gold);">
                        <i class="fas fa-trophy"></i> Impact Donor Leaderboard
                    </h2>
                    <div class="glass-card" style="margin: 0; padding: 1rem;">
                        <h5 style="color: var(--terminal-purple);">Fund Benchmarking & Screening Report</h5>
                        <button class="btn btn-premium btn-sm" onclick="showPremiumModal('fund-benchmarking-leaderboard')">
                            Generate Report - $299
                        </button>
                    </div>
                </div>

                <div class="row mb-4">
                    <div class="col-md-4">
                        <div class="glass-card text-center">
                            <h3 data-bind="your_rank | number" style="color: var(--terminal-gold);">#3</h3>
                            <p>Your Rank</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="glass-card text-center">
                            <h3 data-bind="your_lives_per_grant | number" style="color: var(--terminal-green);">6.8</h3>
                            <p>Your Lives-per-Grant</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="glass-card text-center">
                            <h3 data-bind="percentile_rank | percentage" style="color: var(--terminal-blue);">85th</h3>
                            <p>Percentile</p>
                        </div>
                    </div>
                </div>

                <div class="leaderboard-item" aria-label="First place impact donor">
                    <div class="rank-number">1</div>
                    <div class="flex-grow-1">
                        <div class="fw-bold" data-bind="leader_1_name">Gates Foundation</div>
                        <div class="text-muted" data-bind="leader_1_focus">Global Education Initiative</div>
                    </div>
                    <div class="text-end">
                        <div class="fw-bold" style="color: var(--terminal-green);" data-bind="leader_1_lives_per_grant | number">9.2</div>
                        <div class="text-muted">Lives-per-Grant</div>
                    </div>
                    <div class="rank-change rank-same">
                        <i class="fas fa-minus"></i>
                    </div>
                </div>

                <div class="leaderboard-item" aria-label="Second place impact donor">
                    <div class="rank-number">2</div>
                    <div class="flex-grow-1">
                        <div class="fw-bold" data-bind="leader_2_name">Mastercard Foundation</div>
                        <div class="text-muted" data-bind="leader_2_focus">African Youth Education</div>
                    </div>
                    <div class="text-end">
                        <div class="fw-bold" style="color: var(--terminal-green);" data-bind="leader_2_lives_per_grant | number">8.7</div>
                        <div class="text-muted">Lives-per-Grant</div>
                    </div>
                    <div class="rank-change rank-up">
                        <i class="fas fa-arrow-up"></i>
                    </div>
                </div>

                <div class="leaderboard-item" style="background: rgba(0, 212, 255, 0.1);" aria-label="Your position - third place">
                    <div class="rank-number">3</div>
                    <div class="flex-grow-1">
                        <div class="fw-bold" data-bind="your_organization">Your Organization</div>
                        <div class="text-muted" data-bind="your_focus">ESG Education Portfolio</div>
                    </div>
                    <div class="text-end">
                        <div class="fw-bold" style="color: var(--terminal-green);" data-bind="your_lives_per_grant_display | number">6.8</div>
                        <div class="text-muted">Lives-per-Grant</div>
                    </div>
                    <div class="rank-change rank-up">
                        <i class="fas fa-arrow-up"></i>
                    </div>
                </div>

                <div class="leaderboard-item" aria-label="Fourth place impact donor">
                    <div class="rank-number">4</div>
                    <div class="flex-grow-1">
                        <div class="fw-bold" data-bind="leader_4_name">Open Society Foundations</div>
                        <div class="text-muted" data-bind="leader_4_focus">Democratic Education</div>
                    </div>
                    <div class="text-end">
                        <div class="fw-bold" style="color: var(--terminal-green);" data-bind="leader_4_lives_per_grant | number">6.3</div>
                        <div class="text-muted">Lives-per-Grant</div>
                    </div>
                    <div class="rank-change rank-down">
                        <i class="fas fa-arrow-down"></i>
                    </div>
                </div>

                <div class="leaderboard-item" aria-label="Fifth place impact donor">
                    <div class="rank-number">5</div>
                    <div class="flex-grow-1">
                        <div class="fw-bold" data-bind="leader_5_name">Ford Foundation</div>
                        <div class="text-muted" data-bind="leader_5_focus">Social Justice Education</div>
                    </div>
                    <div class="text-end">
                        <div class="fw-bold" style="color: var(--terminal-green);" data-bind="leader_5_lives_per_grant | number">5.9</div>
                        <div class="text-muted">Lives-per-Grant</div>
                    </div>
                    <div class="rank-change rank-same">
                        <i class="fas fa-minus"></i>
                    </div>
                </div>
            </div>

            <!-- Collaboration Zone Tab -->
            <div id="collaboration" class="tab-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 style="color: var(--terminal-purple);">
                        <i class="fas fa-users"></i> Collaboration Zone
                    </h2>
                    <div class="d-flex gap-2">
                        <div class="glass-card" style="margin: 0; padding: 1rem;">
                            <h6 style="color: var(--terminal-blue);">Stakeholder Engagement Report</h6>
                            <button class="btn btn-premium btn-sm" onclick="showPremiumModal('stakeholder-engagement')">
                                Generate - $199
                            </button>
                        </div>
                        <div class="glass-card" style="margin: 0; padding: 1rem;">
                            <h6 style="color: var(--terminal-purple);">Cross-Sector Collaboration Report</h6>
                            <button class="btn btn-premium btn-sm" onclick="showPremiumModal('cross-sector-collaboration')">
                                Generate - $249
                            </button>
                        </div>
                    </div>
                </div>

                <div class="row mb-4">
                    <!-- Upcoming Events Calendar -->
                    <div class="col-md-6">
                        <div class="calendar-widget">
                            <div class="calendar-header">
                                <div class="calendar-title">
                                    <i class="fas fa-calendar-alt"></i> Upcoming Events
                                </div>
                            </div>
                            <div class="event-item" aria-label="ESG Education Summit event">
                                <div class="event-date" data-bind="event_1_date">Dec 15</div>
                                <div class="event-title" data-bind="event_1_title">ESG Education Summit - Nairobi</div>
                            </div>
                            <div class="event-item" aria-label="Impact Measurement Workshop event">
                                <div class="event-date" data-bind="event_2_date">Dec 22</div>
                                <div class="event-title" data-bind="event_2_title">Impact Measurement Workshop</div>
                            </div>
                            <div class="event-item" aria-label="Quarterly Review Meeting event">
                                <div class="event-date" data-bind="event_3_date">Jan 8</div>
                                <div class="event-title" data-bind="event_3_title">Q4 Portfolio Review Meeting</div>
                            </div>
                            <div class="event-item" aria-label="Climate Education Conference event">
                                <div class="event-date" data-bind="event_4_date">Jan 15</div>
                                <div class="event-title" data-bind="event_4_title">Climate Education Conference</div>
                            </div>
                            <div class="text-center mt-3">
                                <button class="btn btn-outline-light btn-sm" onclick="viewFullCalendar()">
                                    View Full Calendar
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Network Insights -->
                    <div class="col-md-6">
                        <div class="network-insights">
                            <div class="insights-header">
                                <div class="insights-title">
                                    <i class="fas fa-network-wired"></i> Network Insights
                                </div>
                            </div>
                            <div class="insight-metric" aria-label="Active connections metric">
                                <div class="insight-label">Active Connections</div>
                                <div class="insight-value" data-bind="active_connections | number">156</div>
                            </div>
                            <div class="insight-metric" aria-label="Collaboration opportunities metric">
                                <div class="insight-label">Collaboration Opportunities</div>
                                <div class="insight-value" data-bind="collaboration_opportunities | number">23</div>
                            </div>
                            <div class="insight-metric" aria-label="Shared investments metric">
                                <div class="insight-label">Shared Investments</div>
                                <div class="insight-value" data-bind="shared_investments | number">8</div>
                            </div>
                            <div class="insight-metric" aria-label="Network influence score metric">
                                <div class="insight-label">Network Influence Score</div>
                                <div class="insight-value" data-bind="influence_score | number">87</div>
                            </div>
                            <div class="insight-metric" aria-label="Knowledge sharing sessions metric">
                                <div class="insight-label">Knowledge Sharing Sessions</div>
                                <div class="insight-value" data-bind="knowledge_sessions | number">12</div>
                            </div>
                            <div class="text-center mt-3">
                                <button class="btn btn-outline-light btn-sm" onclick="expandNetwork()">
                                    Expand Network
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="collaboration-card" aria-label="UNESCO partnership opportunity">
                    <div class="badge-icon badge-handshake"><i class="fas fa-handshake"></i></div>
                    <div class="collab-header">
                        <div class="collab-title" data-bind="collab_1_title">UNESCO Global Education Partnership</div>
                        <div class="alignment-score" data-bind="collab_1_alignment | percentage">95%</div>
                    </div>
                    <p data-bind="collab_1_description">Join forces with UNESCO's Education 2030 initiative to scale digital literacy programs across Sub-Saharan Africa. Combined funding pool of $50M targeting 2M students.</p>
                    <div class="d-flex gap-2">
                        <button class="btn btn-primary" onclick="joinPartnership('unesco')">Join Partnership</button>
                        <button class="btn btn-outline-light" onclick="learnMore('unesco')">Learn More</button>
                    </div>
                </div>

                <div class="collaboration-card" aria-label="Mastercard Foundation collaboration">
                    <div class="badge-icon badge-rocket"><i class="fas fa-rocket"></i></div>
                    <div class="collab-header">
                        <div class="collab-title" data-bind="collab_2_title">Mastercard Foundation - Young Africa Works</div>
                        <div class="alignment-score" data-bind="collab_2_alignment | percentage">88%</div>
                    </div>
                    <p data-bind="collab_2_description">Co-invest in skills development programs preparing African youth for the digital economy. Focus on fintech, coding, and entrepreneurship education.</p>
                    <div class="d-flex gap-2">
                        <button class="btn btn-primary" onclick="joinPartnership('mastercard')">Join Partnership</button>
                        <button class="btn btn-outline-light" onclick="learnMore('mastercard')">Learn More</button>
                    </div>
                </div>

                <div class="collaboration-card" aria-label="Climate education consortium">
                    <div class="badge-icon badge-leaf"><i class="fas fa-leaf"></i></div>
                    <div class="collab-header">
                        <div class="collab-title" data-bind="collab_3_title">Climate Education Consortium</div>
                        <div class="alignment-score" data-bind="collab_3_alignment | percentage">92%</div>
                    </div>
                    <p data-bind="collab_3_description">Multi-donor initiative focused on climate change education and environmental sustainability curricula. Targeting 500K students across 15 African countries.</p>
                    <div class="d-flex gap-2">
                        <button class="btn btn-primary" onclick="joinPartnership('climate-consortium')">Join Partnership</button>
                        <button class="btn btn-outline-light" onclick="learnMore('climate-consortium')">Learn More</button>
                    </div>
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="reports" class="tab-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 style="color: var(--terminal-blue);">
                        <i class="fas fa-file-alt"></i> Professional Reports
                    </h2>
                    <button class="btn btn-outline-light" onclick="document.getElementById('timeToggle').style.display = document.getElementById('timeToggle').style.display === 'none' ? 'flex' : 'none'">
                        <i class="fas fa-clock"></i> Time Range
                    </button>
                </div>

                <div class="report-grid">
                    <!-- Executive Summary -->
                    <div class="report-card" aria-label="Executive Summary report">
                        <div class="report-title">Executive Summary</div>
                        <div class="report-description">Comprehensive overview of your education portfolio performance, key achievements, and strategic recommendations.</div>
                        <div class="report-price">Free</div>
                        <button class="btn btn-primary" onclick="generateReport('executive-summary')">Generate Report</button>
                    </div>

                    <!-- Scalability & Impact Expansion Report -->
                    <div class="report-card" aria-label="Scalability report">
                        <div class="report-title">Scalability & Impact Expansion Report</div>
                        <div class="report-description">Analysis of scaling opportunities, impact multiplication strategies, and growth potential across your education investments.</div>
                        <div class="report-price">$199</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('scalability-expansion')">Purchase Report</button>
                    </div>

                    <!-- ESG Scorecard -->
                    <div class="report-card" aria-label="ESG Scorecard report">
                        <div class="report-title">ESG Scorecard</div>
                        <div class="report-description">Detailed environmental, social, and governance performance metrics with industry benchmarks and improvement recommendations.</div>
                        <div class="report-price">$149</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('esg-scorecard-full')">Purchase Report</button>
                    </div>

                    <!-- Learning Outcomes Analysis -->
                    <div class="report-card" aria-label="Learning Outcomes Analysis report">
                        <div class="report-title">Learning Outcomes Analysis</div>
                        <div class="report-description">In-depth analysis of student learning outcomes, literacy improvements, and educational achievement metrics across your portfolio.</div>
                        <div class="report-price">$179</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('learning-outcomes')">Purchase Report</button>
                    </div>

                    <!-- Teacher Training Impact -->
                    <div class="report-card" aria-label="Teacher Training Impact report">
                        <div class="report-title">Teacher Training Impact</div>
                        <div class="report-description">Assessment of teacher development programs, training effectiveness, and educator retention rates in your funded initiatives.</div>
                        <div class="report-price">$159</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('teacher-training')">Purchase Report</button>
                    </div>

                    <!-- Gender Equity & Diversity Report -->
                    <div class="report-card" aria-label="Gender Equity report">
                        <div class="report-title">Gender Equity & Diversity Report</div>
                        <div class="report-description">Comprehensive analysis of gender parity, inclusion metrics, and diversity outcomes in your education investments.</div>
                        <div class="report-price">$189</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('gender-equity')">Purchase Report</button>
                    </div>

                    <!-- Compliance Report -->
                    <div class="report-card" aria-label="Compliance report">
                        <div class="report-title">Compliance Report</div>
                        <div class="report-description">Regulatory compliance assessment, UNESCO framework alignment, and international education standards adherence.</div>
                        <div class="report-price">$199</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('compliance')">Purchase Report</button>
                    </div>

                    <!-- Digital Divide Analysis -->
                    <div class="report-card" aria-label="Digital Divide Analysis report">
                        <div class="report-title">Digital Divide Analysis</div>
                        <div class="report-description">Assessment of digital access, technology adoption, and digital literacy improvements in your funded programs.</div>
                        <div class="report-price">$169</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('digital-divide')">Purchase Report</button>
                    </div>

                    <!-- Cost Effectiveness Study -->
                    <div class="report-card" aria-label="Cost Effectiveness Study report">
                        <div class="report-title">Cost Effectiveness Study</div>
                        <div class="report-description">Detailed cost-per-beneficiary analysis, efficiency metrics, and optimization recommendations for maximum impact.</div>
                        <div class="report-price">$219</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('cost-effectiveness')">Purchase Report</button>
                    </div>

                    <!-- Policy Influence Report -->
                    <div class="report-card" aria-label="Policy Influence report">
                        <div class="report-title">Policy Influence Report</div>
                        <div class="report-description">Analysis of policy changes influenced by your investments, government engagement, and systemic education reforms.</div>
                        <div class="report-price">$249</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('policy-influence')">Purchase Report</button>
                    </div>

                    <!-- Sustainability Assessment -->
                    <div class="report-card" aria-label="Sustainability Assessment report">
                        <div class="report-title">Sustainability Assessment</div>
                        <div class="report-description">Long-term sustainability analysis of funded programs, financial viability, and institutional capacity building.</div>
                        <div class="report-price">$199</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('sustainability')">Purchase Report</button>
                    </div>

                    <!-- Carbon & Decarbonization Report -->
                    <div class="report-card" aria-label="Carbon report">
                        <div class="report-title">Carbon & Decarbonization Report</div>
                        <div class="report-description">Environmental impact assessment, carbon footprint analysis, and climate education effectiveness metrics.</div>
                        <div class="report-price">$179</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('carbon-decarb')">Purchase Report</button>
                    </div>

                    <!-- Materiality Assessment Report -->
                    <div class="report-card" aria-label="Materiality Assessment report">
                        <div class="report-title">Materiality Assessment Report</div>
                        <div class="report-description">Identification and prioritization of material ESG issues, stakeholder concerns, and impact materiality mapping.</div>
                        <div class="report-price">$229</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('materiality')">Purchase Report</button>
                    </div>

                    <!-- Lives-per-Grant & Metrics Dashboard Report -->
                    <div class="report-card" aria-label="Lives-per-Grant Dashboard report">
                        <div class="report-title">Lives-per-Grant & Metrics Dashboard Report</div>
                        <div class="report-description">Comprehensive Lives-per-Grant analysis, performance metrics, and comparative benchmarking across your portfolio.</div>
                        <div class="report-price">$249</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('lives-per-grant-dashboard')">Purchase Report</button>
                    </div>

                    <!-- Fund Benchmarking & Screening Report -->
                    <div class="report-card" aria-label="Fund Benchmarking report">
                        <div class="report-title">Fund Benchmarking & Screening Report</div>
                        <div class="report-description">Peer comparison analysis, industry benchmarking, and investment screening recommendations for optimal portfolio performance.</div>
                        <div class="report-price">$299</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('fund-benchmarking-full')">Purchase Report</button>
                    </div>

                    <!-- Stakeholder Engagement Report -->
                    <div class="report-card" aria-label="Stakeholder Engagement report">
                        <div class="report-title">Stakeholder Engagement Report</div>
                        <div class="report-description">Analysis of stakeholder relationships, engagement effectiveness, and community involvement in your education initiatives.</div>
                        <div class="report-price">$199</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('stakeholder-engagement-full')">Purchase Report</button>
                    </div>

                    <!-- Cross-Sector Collaboration Report -->
                    <div class="report-card" aria-label="Cross-Sector Collaboration report">
                        <div class="report-title">Cross-Sector Collaboration Report</div>
                        <div class="report-description">Assessment of multi-sector partnerships, collaboration effectiveness, and synergy opportunities across your investments.</div>
                        <div class="report-price">$249</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('cross-sector-full')">Purchase Report</button>
                    </div>

                    <!-- Risk-Adjusted Lives-per-Grant Report -->
                    <div class="report-card" aria-label="Risk-Adjusted Lives-per-Grant report">
                        <div class="report-title">Risk-Adjusted Lives-per-Grant Report</div>
                        <div class="report-description">Advanced risk-adjusted performance analysis, volatility assessment, and risk-return optimization for your education portfolio.</div>
                        <div class="report-price">$279</div>
                        <button class="btn btn-premium" onclick="showPremiumModal('risk-adjusted-roi')">Purchase Report</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Completion Modal -->
    <div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="profileModalLabel">Complete Your Impact Donor Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span>Profile Completion</span>
                            <span>65%</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar" style="width: 65%" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </div>
                    
                    <form id="profileForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="organizationName" class="form-label">Organization Name</label>
                                <input type="text" class="form-control" id="organizationName" placeholder="Your Foundation/Organization">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="donorType" class="form-label">Impact Donor Type</label>
                                <select class="form-select" id="donorType">
                                    <option value="">Select Type</option>
                                    <option value="foundation">Foundation</option>
                                    <option value="ngo">NGO</option>
                                    <option value="government">Government Agency</option>
                                    <option value="corporate">Corporate Foundation</option>
                                    <option value="individual">Individual Philanthropist</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="focusAreas" class="form-label">Education Focus Areas</label>
                                <select class="form-select" id="focusAreas" multiple>
                                    <option value="early-childhood">Early Childhood Education</option>
                                    <option value="primary">Primary Education</option>
                                    <option value="secondary">Secondary Education</option>
                                    <option value="higher-ed">Higher Education</option>
                                    <option value="vocational">Vocational Training</option>
                                    <option value="stem">STEM Education</option>
                                    <option value="digital-literacy">Digital Literacy</option>
                                    <option value="teacher-training">Teacher Training</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="geographicFocus" class="form-label">Geographic Focus</label>
                                <select class="form-select" id="geographicFocus" multiple>
                                    <option value="south-africa">South Africa</option>
                                    <option value="nigeria">Nigeria</option>
                                    <option value="kenya">Kenya</option>
                                    <option value="ghana">Ghana</option>
                                    <option value="ethiopia">Ethiopia</option>
                                    <option value="uganda">Uganda</option>
                                    <option value="tanzania">Tanzania</option>
                                    <option value="global">Global</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="investmentRange" class="form-label">Typical Investment Range</label>
                                <select class="form-select" id="investmentRange">
                                    <option value="">Select Range</option>
                                    <option value="under-100k">Under $100K</option>
                                    <option value="100k-500k">$100K - $500K</option>
                                    <option value="500k-1m">$500K - $1M</option>
                                    <option value="1m-5m">$1M - $5M</option>
                                    <option value="5m-plus">$5M+</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="sdgPriorities" class="form-label">UN SDG Priorities</label>
                                <select class="form-select" id="sdgPriorities" multiple>
                                    <option value="sdg4">SDG 4: Quality Education</option>
                                    <option value="sdg5">SDG 5: Gender Equality</option>
                                    <option value="sdg8">SDG 8: Decent Work</option>
                                    <option value="sdg10">SDG 10: Reduced Inequalities</option>
                                    <option value="sdg13">SDG 13: Climate Action</option>
                                    <option value="sdg16">SDG 16: Peace & Justice</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="reportingPreferences" class="form-label">Reporting Preferences</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="quarterlyReports">
                                <label class="form-check-label" for="quarterlyReports">Quarterly Impact Reports</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="monthlyUpdates">
                                <label class="form-check-label" for="monthlyUpdates">Monthly Portfolio Updates</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="opportunityAlerts">
                                <label class="form-check-label" for="opportunityAlerts">New Opportunity Alerts</label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Save Later</button>
                    <button type="button" class="btn btn-primary" onclick="saveProfile()">Save Profile</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Premium Feature Modal -->
    <div class="modal fade" id="premiumModal" tabindex="-1" aria-labelledby="premiumModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="premiumModalLabel">Premium Feature</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <i class="fas fa-crown" style="font-size: 3rem; color: var(--terminal-gold);"></i>
                        <h4 class="mt-3" id="premiumFeatureTitle">Unlock Premium Report</h4>
                        <p id="premiumFeatureDescription">Get detailed insights and professional analysis.</p>
                        <div class="h3 text-warning" id="premiumPrice">$149</div>
                    </div>
                    <div class="d-grid">
                        <button class="btn btn-premium btn-lg" onclick="processPayment()">
                            <i class="fas fa-credit-card"></i> Pay with Paystack
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Global variables
        let currentTimeRange = 365;
        let currentPremiumFeature = '';
        
        // Data binding system
        const dashboardData = {
            // Overview data
            students_reached: 285000,
            total_investment: 2400000,
            lives_per_grant: 5.8,
            literacy_improvement: 94,
            last_update: "2 hours ago",
            
            // Story data
            story_title_1: "Gates Foundation Empowers Nomsa's Teaching Revolution in South Africa",
            story_content_1: "From a rural classroom with 45 students and no electricity, Nomsa Mthembu transformed into a digital literacy champion. Through your education investment, she now trains 200+ teachers monthly using solar-powered tablets, reaching 12,000 students across KwaZulu-Natal.",
            nomsa_students_reached: 12000,
            nomsa_teachers_trained: 200,
            nomsa_literacy_gain: 85,
            
            story_title_2: "STEM Sisters: Breaking Barriers in Nigerian Tech Education",
            story_content_2: "In Lagos, 16-year-old Amina Yusuf leads a coding club of 150 girls. Your investment in gender-focused STEM education helped establish 25 similar clubs across Nigeria, with 89% of participants now pursuing tech careersâ€”a 340% increase from 2021.",
            stem_girls_count: 3750,
            tech_career_rate: 89,
            growth_rate: 340,
            
            story_title_3: "Climate Champions: Kenya's Green Education Revolution",
            story_content_3: "In Nairobi's Kibera slum, environmental science teacher James Kiprotich uses VR headsets to show students melting glaciers. His climate education program, funded through your ESG portfolio, now operates in 80 schools, training 15,000 young climate advocates.",
            climate_advocates: 15000,
            schools_count: 80,
            carbon_awareness: 95,
            
            // Opportunity Ripple data
            active_opportunities: 24,
            avg_compatibility: 94,
            total_funding_needed: 12800000,
            
            opportunity_1_name: "EduTech Kenya - Digital Literacy Platform",
            opportunity_1_compatibility: 96,
            opportunity_1_funding: 2500000,
            opportunity_1_students: 50000,
            opportunity_1_lives_per_grant: 8.2,
            opportunity_1_timeline: "18 months",
            
            opportunity_2_name: "Girls Code Ghana - STEM Empowerment",
            opportunity_2_compatibility: 94,
            opportunity_2_funding: 1800000,
            opportunity_2_students: 25000,
            opportunity_2_lives_per_grant: 7.8,
            opportunity_2_timeline: "24 months",
            
            opportunity_3_name: "Climate Education Network - Pan-African Initiative",
            opportunity_3_compatibility: 92,
            opportunity_3_funding: 4200000,
            opportunity_3_students: 100000,
            opportunity_3_lives_per_grant: 9.1,
            opportunity_3_timeline: "36 months",
            
            // Portfolio data
            total_investments: 8,
            portfolio_value: 18500000,
            avg_lives_per_grant: 6.8,
            total_beneficiaries: 285000,
            
            portfolio_1_name: "EduTech Solutions",
            portfolio_1_investment: 2500000,
            portfolio_1_lives_per_grant: 7.2,
            portfolio_1_beneficiaries: 45000,
            portfolio_1_status: "Active",
            
            portfolio_2_name: "STEM Academy Network",
            portfolio_2_investment: 3200000,
            portfolio_2_lives_per_grant: 6.1,
            portfolio_2_beneficiaries: 38000,
            portfolio_2_status: "Growth",
            
            portfolio_3_name: "Climate Education Initiative",
            portfolio_3_investment: 1800000,
            portfolio_3_lives_per_grant: 8.5,
            portfolio_3_beneficiaries: 52000,
            portfolio_3_status: "Mature",
            
            // Leaderboard data
            your_rank: 3,
            your_lives_per_grant: 6.8,
            percentile_rank: 85,
            
            leader_1_name: "Gates Foundation",
            leader_1_focus: "Global Education Initiative",
            leader_1_lives_per_grant: 9.2,
            
            leader_2_name: "Mastercard Foundation",
            leader_2_focus: "African Youth Education",
            leader_2_lives_per_grant: 8.7,
            
            your_organization: "Your Organization",
            your_focus: "ESG Education Portfolio",
            your_lives_per_grant_display: 6.8,
            
            leader_4_name: "Open Society Foundations",
            leader_4_focus: "Democratic Education",
            leader_4_lives_per_grant: 6.3,
            
            leader_5_name: "Ford Foundation",
            leader_5_focus: "Social Justice Education",
            leader_5_lives_per_grant: 5.9,
            
            // Collaboration data
            event_1_date: "Dec 15",
            event_1_title: "ESG Education Summit - Nairobi",
            event_2_date: "Dec 22",
            event_2_title: "Impact Measurement Workshop",
            event_3_date: "Jan 8",
            event_3_title: "Q4 Portfolio Review Meeting",
            event_4_date: "Jan 15",
            event_4_title: "Climate Education Conference",
            
            active_connections: 156,
            collaboration_opportunities: 23,
            shared_investments: 8,
            influence_score: 87,
            knowledge_sessions: 12,
            
            collab_1_title: "UNESCO Global Education Partnership",
            collab_1_alignment: 95,
            collab_1_description: "Join forces with UNESCO's Education 2030 initiative to scale digital literacy programs across Sub-Saharan Africa. Combined funding pool of $50M targeting 2M students.",
            
            collab_2_title: "Mastercard Foundation - Young Africa Works",
            collab_2_alignment: 88,
            collab_2_description: "Co-invest in skills development programs preparing African youth for the digital economy. Focus on fintech, coding, and entrepreneurship education.",
            
            collab_3_title: "Climate Education Consortium",
            collab_3_alignment: 92,
            collab_3_description: "Multi-donor initiative focused on climate change education and environmental sustainability curricula. Targeting 500K students across 15 African countries."
        };

        // Data binding function
        function bindData() {
            document.querySelectorAll('[data-bind]').forEach(element => {
                const [key, format] = element.getAttribute('data-bind').split('|');
                const value = dashboardData[key];
                
                if (value !== undefined) {
                    if (format) {
                        element.textContent = formatValue(value, format.trim());
                    } else {
                        element.textContent = value;
                    }
                }
            });
        }

        // Value formatting function
        function formatValue(value, format) {
            switch (format) {
                case 'number':
                    return typeof value === 'number' ? value.toLocaleString() : value;
                case 'currency':
                    return typeof value === 'number' ? 
                        (value >= 1000000 ? `$${(value/1000000).toFixed(1)}M` : 
                         value >= 1000 ? `$${(value/1000).toFixed(0)}K` : 
                         `$${value.toLocaleString()}`) : value;
                case 'percentage':
                    return typeof value === 'number' ? `${value}%` : value;
                default:
                    return value;
            }
        }

        // Tab switching function
        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked nav item
            event.target.closest('.nav-item').classList.add('active');
            
            // Initialize charts for the active tab
            setTimeout(() => {
                initializeChartsForTab(tabName);
            }, 100);
        }

        // Chart initialization function
        function initializeChartsForTab(tabName) {
            if (tabName === 'overview') {
                initializeOverviewCharts();
            }
        }

        // Initialize overview charts
        function initializeOverviewCharts() {
            // Region Chart
            const regionCtx = document.getElementById('regionChart');
            if (regionCtx && !regionCtx.chart) {
                regionCtx.chart = new Chart(regionCtx, {
                    type: 'bar',
                    data: {
                        labels: ['South Africa', 'Nigeria', 'Kenya', 'Ghana', 'Ethiopia'],
                        datasets: [{
                            label: 'Students Reached',
                            data: [85000, 72000, 58000, 45000, 25000],
                            backgroundColor: [
                                'rgba(0, 212, 255, 0.8)',
                                'rgba(139, 92, 246, 0.8)',
                                'rgba(0, 255, 136, 0.8)',
                                'rgba(255, 215, 0, 0.8)',
                                'rgba(255, 107, 53, 0.8)'
                            ],
                            borderColor: [
                                'rgba(0, 212, 255, 1)',
                                'rgba(139, 92, 246, 1)',
                                'rgba(0, 255, 136, 1)',
                                'rgba(255, 215, 0, 1)',
                                'rgba(255, 107, 53, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#ffffff'
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    color: '#ffffff'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            },
                            x: {
                                ticks: {
                                    color: '#ffffff'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            }
                        }
                    }
                });
            }

            // Lives-per-Grant Chart
            const livesPerGrantCtx = document.getElementById('livesPerGrantChart');
            if (livesPerGrantCtx && !livesPerGrantCtx.chart) {
                livesPerGrantCtx.chart = new Chart(livesPerGrantCtx, {
                    type: 'line',
                    data: {
                        labels: ['2022 Q1', '2022 Q2', '2022 Q3', '2022 Q4', '2023 Q1', '2023 Q2', '2023 Q3', '2023 Q4', '2024 Q1', '2024 Q2', '2024 Q3', '2024 Q4'],
                        datasets: [{
                            label: 'Lives-per-Grant',
                            data: [3.2, 3.8, 4.1, 4.5, 4.9, 5.2, 5.6, 5.8, 6.1, 6.4, 6.6, 6.8],
                            borderColor: 'rgba(0, 255, 136, 1)',
                            backgroundColor: 'rgba(0, 255, 136, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#ffffff'
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    color: '#ffffff'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            },
                            x: {
                                ticks: {
                                    color: '#ffffff'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            }
                        }
                    }
                });
            }

            // Preview Chart (blurred)
            const previewCtx = document.getElementById('previewChart');
            if (previewCtx && !previewCtx.chart) {
                previewCtx.chart = new Chart(previewCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['High Impact', 'Medium Impact', 'Emerging'],
                        datasets: [{
                            data: [65, 25, 10],
                            backgroundColor: [
                                'rgba(0, 255, 136, 0.8)',
                                'rgba(255, 215, 0, 0.8)',
                                'rgba(255, 107, 53, 0.8)'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }
        }

        // Time range toggle function
        function toggleTimeRange(days) {
            currentTimeRange = days;
            
            // Update active button
            document.querySelectorAll('#timeToggle button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Fetch new data based on time range
            fetchDataForTimeRange(days);
        }

        // Fetch data for time range
        function fetchDataForTimeRange(days) {
            // Simulate API call
            fetch(`/api/sim-data?days=${days}`)
                .then(response => response.json())
                .then(data => {
                    // Update dashboard data
                    Object.assign(dashboardData, data);
                    bindData();
                    
                    // Refresh charts
                    document.querySelectorAll('canvas').forEach(canvas => {
                        if (canvas.chart) {
                            canvas.chart.destroy();
                            canvas.chart = null;
                        }
                    });
                    
                    // Re-initialize charts
                    const activeTab = document.querySelector('.tab-content.active').id;
                    setTimeout(() => {
                        initializeChartsForTab(activeTab);
                    }, 100);
                })
                .catch(error => {
                    console.log('Using simulated data for demo');
                    // Use simulated data adjustments for different time ranges
                    if (days === 1825) { // 5 years
                        dashboardData.students_reached = 450000;
                        dashboardData.lives_per_grant = 7.2;
                        dashboardData.total_beneficiaries = 450000;
                    } else { // 365 days
                        dashboardData.students_reached = 285000;
                        dashboardData.lives_per_grant = 5.8;
                        dashboardData.total_beneficiaries = 285000;
                    }
                    bindData();
                });
        }

        // Profile modal functions
        function showProfileModal() {
            const modal = new bootstrap.Modal(document.getElementById('profileModal'));
            modal.show();
        }

        function saveProfile() {
            // Collect form data
            const formData = new FormData(document.getElementById('profileForm'));
            
            // Simulate saving profile
            console.log('Saving profile data:', Object.fromEntries(formData));
            
            // Update completion percentage
            document.querySelector('.profile-completion').innerHTML = `
                <i class="fas fa-user-circle"></i>
                Profile: 85% Complete
                <div class="progress mt-1">
                    <div class="progress-bar" style="width: 85%" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            `;
            
            // Close modal
            bootstrap.Modal.getInstance(document.getElementById('profileModal')).hide();
            
            // Show success message
            alert('Profile updated successfully! Your dashboard will now show more personalized content.');
        }

        // Premium modal functions
        function showPremiumModal(featureType) {
            currentPremiumFeature = featureType;
            
            const modal = new bootstrap.Modal(document.getElementById('premiumModal'));
            const titleElement = document.getElementById('premiumFeatureTitle');
            const descriptionElement = document.getElementById('premiumFeatureDescription');
            const priceElement = document.getElementById('premiumPrice');
            
            // Set content based on feature type
            const featureConfig = {
                'impact-report': {
                    title: 'Unlock Impact Report',
                    description: 'Get detailed insights into your education portfolio performance and strategic recommendations.',
                    price: '$149'
                },
                'scalability-report': {
                    title: 'Scalability & Impact Expansion Report',
                    description: 'Comprehensive analysis of scaling opportunities and impact multiplication strategies.',
                    price: '$199'
                },
                'esg-scorecard': {
                    title: 'ESG Scorecard',
                    description: 'Detailed environmental, social, and governance performance metrics and benchmarks.',
                    price: '$149'
                },
                'fund-benchmarking': {
                    title: 'Fund Benchmarking & Screening Report',
                    description: 'Peer comparison analysis and investment screening recommendations.',
                    price: '$299'
                },
                'roi-metrics': {
                    title: 'Lives-per-Grant & Metrics Dashboard Report',
                    description: 'Comprehensive Lives-per-Grant analysis and performance metrics.',
                    price: '$249'
                },
                'stakeholder-engagement': {
                    title: 'Stakeholder Engagement Report',
                    description: 'Analysis of stakeholder relationships and engagement effectiveness.',
                    price: '$199'
                },
                'cross-sector-collaboration': {
                    title: 'Cross-Sector Collaboration Report',
                    description: 'Assessment of multi-sector partnerships and collaboration effectiveness.',
                    price: '$249'
                }
            };
            
            const config = featureConfig[featureType] || featureConfig['impact-report'];
            
            titleElement.textContent = config.title;
            descriptionElement.textContent = config.description;
            priceElement.textContent = config.price;
            
            modal.show();
        }

        // Paystack payment processing
        function processPayment() {
            const priceText = document.getElementById('premiumPrice').textContent;
            const amount = parseInt(priceText.replace('$', '')) * 100; // Convert to cents
            
            const handler = PaystackPop.setup({
                key: 'pk_test_your_paystack_public_key', // Replace with your public key
                email: 'user@example.com', // Get from user profile
                amount: amount,
                currency: 'USD',
                ref: 'auxeira_' + Math.floor((Math.random() * 1000000000) + 1),
                metadata: {
                    feature: currentPremiumFeature,
                    user_id: 'user_123' // Get from session
                },
                callback: function(response) {
                    // Payment successful
                    console.log('Payment successful:', response);
                    
                    // Close premium modal
                    bootstrap.Modal.getInstance(document.getElementById('premiumModal')).hide();
                    
                    // Show success message
                    alert('Payment successful! Your premium report is being generated and will be available shortly.');
                    
                    // Unlock the feature (simulate)
                    unlockPremiumFeature(currentPremiumFeature);
                },
                onClose: function() {
                    console.log('Payment window closed');
                }
            });
            
            handler.openIframe();
        }

        // Unlock premium feature
        function unlockPremiumFeature(featureType) {
            // Remove premium overlays and enable features
            console.log('Unlocking feature:', featureType);
            
            // This would typically involve:
            // 1. Updating user permissions in database
            // 2. Removing premium locks from UI
            // 3. Enabling premium functionality
            // 4. Generating and delivering the report
        }

        // Story audio functions
        function playStoryAudio(storyId) {
            // Simulate audio playback
            console.log('Playing audio for story:', storyId);
            alert(`Playing audio story: ${storyId}. This would integrate with a text-to-speech service or pre-recorded audio.`);
        }

        // Opportunity functions
        function exploreOpportunity(opportunityId) {
            console.log('Exploring opportunity:', opportunityId);
            alert(`Opening detailed view for ${opportunityId}. This would show comprehensive opportunity analysis.`);
        }

        function scheduleCall(opportunityId) {
            console.log('Scheduling call for:', opportunityId);
            alert(`Scheduling call for ${opportunityId}. This would integrate with a calendar booking system.`);
        }

        // Partnership functions
        function joinPartnership(partnershipId) {
            console.log('Joining partnership:', partnershipId);
            alert(`Initiating partnership process for ${partnershipId}. This would start the collaboration workflow.`);
        }

        function learnMore(partnershipId) {
            console.log('Learning more about:', partnershipId);
            alert(`Opening detailed information for ${partnershipId} partnership opportunity.`);
        }

        // Calendar functions
        function viewFullCalendar() {
            console.log('Opening full calendar view');
            alert('Opening full calendar view. This would integrate with a calendar system like Google Calendar.');
        }

        function expandNetwork() {
            console.log('Expanding network view');
            alert('Opening network expansion tools. This would show networking opportunities and connection recommendations.');
        }

        // Report generation function
        function generateReport(reportType) {
            console.log('Generating report:', reportType);
            
            if (reportType === 'executive-summary') {
                // Free report - generate immediately
                alert('Generating Executive Summary report. This would create and download a comprehensive PDF report.');
            } else {
                // Premium report - show payment modal
                showPremiumModal(reportType);
            }
        }

        // nano-GPT-5 Integration
        async function queryNanoGPT(prompt, context = {}) {
            try {
                const response = await fetch('https://api.nanogpt5.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer YOUR_NANO_GPT_API_KEY'
                    },
                    body: JSON.stringify({
                        model: 'nano-gpt-5-turbo',
                        messages: [
                            {
                                role: 'system',
                                content: 'You are an expert ESG education investment analyst providing insights for impact donors.'
                            },
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        context: context
                    })
                });
                
                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                console.error('nano-GPT-5 API error:', error);
                return 'AI insights temporarily unavailable. Please try again later.';
            }
        }

        // Thunderbit Crawler Integration
        async function crawlEducationData(targets) {
            try {
                const response = await fetch('https://api.thunderbit.com/v1/crawl', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer YOUR_THUNDERBIT_API_KEY'
                    },
                    body: JSON.stringify({
                        targets: targets,
                        extract: ['education-metrics', 'impact-data', 'financial-performance'],
                        format: 'structured'
                    })
                });
                
                const data = await response.json();
                return data.results;
            } catch (error) {
                console.error('Thunderbit Crawler error:', error);
                return null;
            }
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            // Bind initial data
            bindData();
            
            // Initialize overview charts
            setTimeout(() => {
                initializeOverviewCharts();
            }, 500);
            
            // Set up periodic data refresh
            setInterval(() => {
                fetchDataForTimeRange(currentTimeRange);
            }, 300000); // Refresh every 5 minutes
            
            // Update last refresh time
            setInterval(() => {
                const now = new Date();
                const minutes = Math.floor(Math.random() * 10) + 1;
                document.getElementById('lastUpdate').textContent = `${minutes} minutes ago`;
            }, 60000); // Update every minute
        });

        // Accessibility enhancements
        document.addEventListener('keydown', function(e) {
            // Tab navigation enhancement
            if (e.key === 'Tab') {
                document.body.classList.add('keyboard-navigation');
            }
            
            // Escape key to close modals
            if (e.key === 'Escape') {
                const openModals = document.querySelectorAll('.modal.show');
                openModals.forEach(modal => {
                    bootstrap.Modal.getInstance(modal).hide();
                });
            }
        });

        // Remove keyboard navigation class on mouse use
        document.addEventListener('mousedown', function() {
            document.body.classList.remove('keyboard-navigation');
        });
    </script>
</body>
</html>
