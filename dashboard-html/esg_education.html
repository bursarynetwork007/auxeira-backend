<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auxeira ESG Education Impact Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --terminal-dark: #0a0a0a;
            --terminal-darker: #050505;
            --terminal-blue: #00d4ff;
            --terminal-purple: #8b5cf6;
            --terminal-green: #00ff88;
            --terminal-gold: #ffd700;
            --terminal-white: #ffffff;
            --terminal-gray: #666666;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--terminal-dark) 0%, var(--terminal-darker) 100%);
            color: var(--terminal-white);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .terminal-header {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--terminal-blue), var(--terminal-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .profile-completion {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--terminal-white);
            text-decoration: none;
        }

        .profile-completion:hover {
            background: var(--terminal-blue);
            color: var(--terminal-dark);
        }

        .data-refresh {
            font-size: 0.8rem;
            opacity: 0.7;
            color: var(--terminal-green);
        }

        .main-container {
            display: flex;
            min-height: calc(100vh - 80px);
        }

        .sidebar {
            width: 280px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--glass-border);
            padding: 2rem 0;
            position: sticky;
            top: 80px;
            height: calc(100vh - 80px);
            overflow-y: auto;
        }

        .nav-item {
            padding: 1rem 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: var(--terminal-white);
        }

        .nav-item:hover, .nav-item.active {
            background: var(--glass-bg);
            border-left-color: var(--terminal-blue);
            color: var(--terminal-blue);
        }

        .content-area {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.1);
        }

        .hero-impact {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(135deg, var(--terminal-blue), var(--terminal-purple));
            border-radius: 20px;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .hero-impact::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .impact-number {
            font-size: 4rem;
            font-weight: bold;
            color: var(--terminal-white);
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            animation: countUp 2s ease-out;
        }

        @keyframes countUp {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        .impact-label {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-top: 0.5rem;
        }

        .story-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .story-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .story-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(45deg, var(--terminal-blue), var(--terminal-purple));
        }

        .story-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(139, 92, 246, 0.2);
        }

        .story-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: var(--terminal-blue);
        }

        .story-content {
            line-height: 1.6;
            margin-bottom: 1.5rem;
            color: var(--terminal-white);
        }

        .story-metrics {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid var(--glass-border);
        }

        .metric-item {
            text-align: center;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--terminal-green);
        }

        .metric-label {
            font-size: 0.9rem;
            opacity: 0.7;
            color: var(--terminal-white);
        }

        .chart-container {
            background: var(--glass-bg);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
        }

        .chart-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: var(--terminal-blue);
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--terminal-blue), var(--terminal-purple));
            border: none;
            border-radius: 25px;
            padding: 0.8rem 2rem;
            font-weight: bold;
            transition: all 0.3s ease;
            color: var(--terminal-white);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 212, 255, 0.3);
            color: var(--terminal-white);
        }

        .btn-premium {
            background: linear-gradient(45deg, var(--terminal-gold), #ff6b35);
            border: none;
            border-radius: 25px;
            padding: 0.8rem 2rem;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            color: var(--terminal-dark);
        }

        .btn-premium::before {
            content: '👑';
            margin-right: 0.5rem;
        }

        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.3);
            color: var(--terminal-dark);
        }

        .premium-badge {
            background: linear-gradient(45deg, var(--terminal-gold), #ff6b35);
            color: var(--terminal-dark);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .report-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .report-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 212, 255, 0.1);
            border-color: var(--terminal-blue);
        }

        .report-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--terminal-blue);
            margin-bottom: 0.5rem;
        }

        .report-description {
            color: var(--terminal-gray);
            margin-bottom: 1rem;
        }

        .tag {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .tag-sfdr { background: var(--terminal-blue); color: var(--terminal-dark); }
        .tag-csrd { background: var(--terminal-green); color: var(--terminal-dark); }
        .tag-tcfd { background: var(--terminal-purple); color: var(--terminal-white); }
        .tag-unesco { background: var(--terminal-gold); color: var(--terminal-dark); }
        .tag-gri { background: #00ffff; color: var(--terminal-dark); }
        .tag-sasb { background: #ff6b35; color: var(--terminal-white); }
        .tag-cdp { background: #00ff88; color: var(--terminal-dark); }
        .tag-morningstar { background: #ffd700; color: var(--terminal-dark); }
        .tag-ifrs { background: #8b5cf6; color: var(--terminal-white); }
        .tag-risk { background: #ff0040; color: var(--terminal-white); }
        .tag-esg { background: #00d4ff; color: var(--terminal-dark); }
        .tag-benchmarked { background: #666666; color: var(--terminal-white); }

        #report-status {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .report-status-content {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            max-width: 400px;
        }

        .ai-thinking {
            font-size: 4rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .countdown-timer {
            font-size: 3rem;
            font-weight: bold;
            color: var(--terminal-blue);
            margin: 1rem 0;
        }

        .progress-container {
            width: 100%;
            height: 10px;
            background: var(--terminal-dark);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(45deg, var(--terminal-blue), var(--terminal-purple));
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Leaderboard Styles */
        .leaderboard-table {
            background: var(--glass-bg);
            border-radius: 16px;
            overflow: hidden;
        }

        .leaderboard-table table {
            color: var(--terminal-white);
        }

        .leaderboard-table th {
            background: var(--terminal-blue);
            color: var(--terminal-dark);
            font-weight: bold;
            border: none;
        }

        .leaderboard-table td {
            border: none;
            border-bottom: 1px solid var(--glass-border);
        }

        .rank-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-weight: bold;
        }

        .rank-1 { background: var(--terminal-gold); color: var(--terminal-dark); }
        .rank-2 { background: #c0c0c0; color: var(--terminal-dark); }
        .rank-3 { background: #cd7f32; color: var(--terminal-white); }
        .rank-other { background: var(--terminal-gray); color: var(--terminal-white); }

        /* Accessibility Controls */
        .accessibility-controls {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .accessibility-btn {
            background: var(--terminal-dark);
            border: 1px solid var(--terminal-blue);
            color: var(--terminal-white);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .accessibility-btn:hover {
            background: var(--terminal-blue);
            color: var(--terminal-dark);
        }

        /* High Contrast Mode */
        .high-contrast {
            --glass-bg: rgba(0, 0, 0, 0.8);
            --glass-border: rgba(255, 255, 255, 0.8);
        }

        .high-contrast .glass-card,
        .high-contrast .story-card,
        .high-contrast .report-card {
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid var(--terminal-white);
        }

        /* What-If Analysis */
        .what-if-analysis {
            background: var(--glass-bg);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .what-if-analysis h6 {
            color: var(--terminal-gold);
            margin-bottom: 1rem;
        }

        .what-if-analysis label {
            color: var(--terminal-white);
            font-weight: bold;
            margin-bottom: 0.5rem;
            display: block;
        }

        .what-if-analysis .form-range {
            margin-bottom: 0.5rem;
        }

        .what-if-analysis .form-select {
            background: var(--terminal-dark);
            border: 1px solid var(--glass-border);
            color: var(--terminal-white);
        }

        .impact-projection {
            background: var(--glass-bg);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                top: 0;
            }
            
            .nav-item {
                padding: 0.8rem 1rem;
            }
            
            .content-area {
                padding: 1rem;
            }
            
            .impact-number {
                font-size: 2.5rem;
            }
            
            .story-grid {
                grid-template-columns: 1fr;
            }
            
            .accessibility-controls {
                position: relative;
                top: auto;
                right: auto;
                flex-direction: row;
                justify-content: center;
                margin: 20px 0;
            }

            .terminal-header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .user-info {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        /* Modal Styles */
        .modal-content {
            background: var(--terminal-dark);
            border: 1px solid var(--glass-border);
        }

        .modal-header {
            border-bottom: 1px solid var(--glass-border);
        }

        .modal-footer {
            border-top: 1px solid var(--glass-border);
        }

        .modal-title {
            color: var(--terminal-blue);
        }

        .form-control, .form-select {
            background: var(--terminal-dark);
            border: 1px solid var(--glass-border);
            color: var(--terminal-white);
        }

        .form-control:focus, .form-select:focus {
            background: var(--terminal-dark);
            border-color: var(--terminal-blue);
            color: var(--terminal-white);
            box-shadow: 0 0 0 0.2rem rgba(0, 212, 255, 0.25);
        }

        .form-label {
            color: var(--terminal-white);
        }

        .btn-close-white {
            filter: invert(1) grayscale(100%) brightness(200%);
        }

        /* Premium Modal Styles */
        .premium-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .premium-modal-content {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            max-width: 500px;
            margin: 2rem;
        }

        .premium-lock-icon {
            font-size: 4rem;
            color: var(--terminal-gold);
            margin-bottom: 1rem;
        }

        /* Opportunity Cards */
        .opportunity-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .opportunity-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 212, 255, 0.1);
            border-color: var(--terminal-blue);
        }

        .opportunity-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--terminal-blue);
            margin-bottom: 1rem;
        }

        .opportunity-description {
            color: var(--terminal-white);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .opportunity-metrics {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--glass-border);
        }

        .opportunity-metric {
            text-align: center;
        }

        .opportunity-metric-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--terminal-green);
        }

        .opportunity-metric-label {
            font-size: 0.8rem;
            opacity: 0.7;
            color: var(--terminal-white);
        }

        /* Portfolio Health Indicators */
        .portfolio-health {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .health-indicator {
            flex: 1;
            background: var(--glass-bg);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            border: 1px solid var(--glass-border);
        }

        .health-indicator.healthy {
            border-color: var(--terminal-green);
        }

        .health-indicator.warning {
            border-color: var(--terminal-gold);
        }

        .health-indicator.critical {
            border-color: #ff0040;
        }

        .health-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .health-label {
            font-size: 0.9rem;
            opacity: 0.8;
            color: var(--terminal-white);
        }

        .health-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0.5rem 0;
        }

        .healthy .health-value { color: var(--terminal-green); }
        .warning .health-value { color: var(--terminal-gold); }
        .critical .health-value { color: #ff0040; }

        /* Animation for numbers */
        .animated-number {
            animation: countUp 2s ease-out;
        }

        /* Pulse animation for live updates */
        .live-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--terminal-green);
            border-radius: 50%;
            animation: pulse 2s infinite;
            margin-left: 0.5rem;
        }

        /* Compliance badges */
        .compliance-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        /* Loading states */
        .loading-skeleton {
            background: linear-gradient(90deg, var(--glass-bg) 25%, rgba(255,255,255,0.1) 50%, var(--glass-bg) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 8px;
            height: 20px;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Tooltip styles */
        .tooltip-custom {
            position: relative;
            cursor: help;
        }

        .tooltip-custom::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--terminal-dark);
            color: var(--terminal-white);
            padding: 0.5rem;
            border-radius: 8px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .tooltip-custom:hover::after {
            opacity: 1;
        }
    </style>
    <link rel="stylesheet" href="leaderboard_styles.css">
</head>
<body>
    <!-- Accessibility Controls -->
    <div class="accessibility-controls">
        <button class="accessibility-btn" onclick="toggleHighContrast()" aria-label="Toggle high contrast mode">
            <i class="fas fa-adjust"></i>
        </button>
        <button class="accessibility-btn" onclick="increaseFontSize()" aria-label="Increase font size">
            <i class="fas fa-search-plus"></i>
        </button>
        <button class="accessibility-btn" onclick="decreaseFontSize()" aria-label="Decrease font size">
            <i class="fas fa-search-minus"></i>
        </button>
    </div>

    <!-- Header -->
    <div class="terminal-header">
        <div class="logo">
            <i class="fas fa-graduation-cap me-2"></i>Auxeira | ESG Education Intelligence
        </div>
        <div class="user-info">
            <div class="profile-completion" onclick="showProfileModal()">
                <i class="fas fa-user-circle me-2"></i>
                <span id="profileCompletion">Profile: 65% Complete</span>
            </div>
            <div class="data-refresh">
                <i class="fas fa-sync-alt me-1"></i>
                <span id="timestamp">Last updated: 2024-10-17 14:30:00 UTC</span>
                <span class="live-indicator"></span>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <div class="nav-item active" onclick="showTab('overview')">
                <i class="fas fa-chart-line"></i>
                <span>Impact Overview</span>
            </div>
            <div class="nav-item" onclick="showTab('opportunity-ripple')">
                <i class="fas fa-handshake"></i>
                <span>Opportunity Ripple</span>
            </div>
            <div class="nav-item" onclick="showTab('portfolio')">
                <i class="fas fa-briefcase"></i>
                <span>Living Portfolio</span>
            </div>
            <div class="nav-item" onclick="showTab('analytics')">
                <i class="fas fa-brain"></i>
                <span>AI Analytics</span>
            </div>
            <div class="nav-item" onclick="showTab('leaderboard')">
                <i class="fas fa-trophy"></i>
                <span>Competitive Intelligence</span>
            </div>
            <div class="nav-item" onclick="showTab('collaboration')">
                <i class="fas fa-users"></i>
                <span>Collaboration Zone</span>
            </div>
            <div class="nav-item" onclick="showTab('reports')">
                <i class="fas fa-file-alt"></i>
                <span>Impact Reports</span>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <!-- Compliance Badges -->
                <div class="compliance-badges">
                    <span class="tag tag-sfdr">SFDR Article 9</span>
                    <span class="tag tag-csrd">CSRD Compliant</span>
                    <span class="tag tag-tcfd">TCFD Aligned</span>
                    <span class="tag tag-unesco">UNESCO Standards</span>
                    <span class="tag tag-gri">GRI Compliant</span>
                </div>

                <!-- Hero Impact Section -->
                <div class="hero-impact">
                    <div class="hero-content">
                        <div class="impact-number animated-number" id="heroImpactNumber">285,000</div>
                        <div class="impact-label">Lives Transformed Through Education</div>
                        <div class="mt-3">
                            <span style="font-size: 1.1rem; opacity: 0.9;">Your R2.4M Investment • 5.8x Impact ROI • 94% Literacy Improvement</span>
                        </div>
                    </div>
                </div>

                <!-- Visual Analytics Section -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="chart-container">
                            <div class="chart-title">Students Reached by Region</div>
                            <canvas id="regionChart" aria-label="Bar chart showing students reached by region" role="img"></canvas>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="chart-container">
                            <div class="chart-title">Impact ROI Trends (3 Years)</div>
                            <canvas id="roiChart" aria-label="Line chart showing ROI trends over 3 years" role="img"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Impact Report Teaser -->
                <div class="glass-card">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 style="color: var(--terminal-blue);">
                            <i class="fas fa-heart"></i> Impact Report
                        </h3>
                        <span class="premium-badge">Premium Feature</span>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <p class="mb-3">Are you maximizing learning outcomes? Our Impact Report reveals untapped opportunities in your education portfolio, mapping clear actionable strategies for 2024.</p>
                            <div class="mb-3">
                                <strong>What's New:</strong>
                                <ul class="mt-2">
                                    <li>12 new partnership opportunities identified</li>
                                    <li>3 underperforming programs with 40% improvement potential</li>
                                    <li>Regional expansion into Nigeria showing 200% ROI potential</li>
                                </ul>
                            </div>
                            <div class="mb-3">
                                <strong>What's Next:</strong> Strategic recommendations for Q1 2024 based on UNESCO frameworks and real-time policy changes.
                            </div>
                        </div>
                        <div class="col-md-4 text-center">
                            <div style="filter: blur(3px); opacity: 0.7;">
                                <canvas id="previewChart" width="200" height="150"></canvas>
                            </div>
                            <button class="btn btn-premium mt-3" onclick="showPremiumModal('impact-report')">
                                Unlock Full Report - $149
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Living Stories Grid -->
                <div class="story-grid">
                    <div class="story-card" onclick="playStoryAudio('nomsa')">
                        <div class="story-title org-placeholder">Gates Foundation Empowers Nomsa's Teaching Revolution in South Africa</div>
                        <div class="story-content">
                            From a rural classroom with 45 students and no electricity, Nomsa Mthembu transformed into a digital literacy champion. Through your education investment, she now trains 200+ teachers monthly using solar-powered tablets, reaching 12,000 students across KwaZulu-Natal.
                        </div>
                        <div class="story-metrics">
                            <div class="metric-item">
                                <div class="metric-value">12,000</div>
                                <div class="metric-label">Students Reached</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value">200+</div>
                                <div class="metric-label">Teachers Trained</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value">85%</div>
                                <div class="metric-label">Literacy Gain</div>
                            </div>
                        </div>
                        <div class="mt-2 text-center">
                            <i class="fas fa-play-circle" style="color: var(--terminal-blue);"></i>
                            <small>Click to hear Nomsa's story</small>
                        </div>
                    </div>

                    <div class="story-card" onclick="playStoryAudio('stem-sisters')">
                        <div class="story-title">STEM Sisters: Breaking Barriers in Nigerian Tech Education</div>
                        <div class="story-content">
                            In Lagos, 16-year-old Amina Yusuf leads a coding club of 150 girls. Your investment in gender-focused STEM education helped establish 25 similar clubs across Nigeria, with 89% of participants now pursuing tech careers—a 340% increase from 2021.
                        </div>
                        <div class="story-metrics">
                            <div class="metric-item">
                                <div class="metric-value">3,750</div>
                                <div class="metric-label">Girls in STEM</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value">89%</div>
                                <div class="metric-label">Tech Career Rate</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value">340%</div>
                                <div class="metric-label">Growth Rate</div>
                            </div>
                        </div>
                        <div class="mt-2 text-center">
                            <i class="fas fa-play-circle" style="color: var(--terminal-purple);"></i>
                            <small>Listen to Amina's journey</small>
                        </div>
                    </div>

                    <div class="story-card" onclick="playStoryAudio('climate-champions')">
                        <div class="story-title">Climate Champions: Kenya's Green Education Revolution</div>
                        <div class="story-content">
                            In Nairobi's Kibera slum, environmental science teacher James Kiprotich uses VR headsets to show students melting glaciers. His climate education program, funded through your ESG portfolio, now operates in 80 schools, training 15,000 young climate advocates.
                        </div>
                        <div class="story-metrics">
                            <div class="metric-item">
                                <div class="metric-value">15,000</div>
                                <div class="metric-label">Climate Advocates</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value">80</div>
                                <div class="metric-label">Schools</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-value">92%</div>
                                <div class="metric-label">Engagement Rate</div>
                            </div>
                        </div>
                        <div class="mt-2 text-center">
                            <i class="fas fa-play-circle" style="color: var(--terminal-green);"></i>
                            <small>Experience the VR classroom</small>
                        </div>
                    </div>
                </div>

                <!-- Key Metrics Dashboard -->
                <div class="row">
                    <div class="col-md-3">
                        <div class="glass-card text-center">
                            <div class="metric-value animated-number" style="font-size: 2.5rem; color: var(--terminal-green);">5.8x</div>
                            <div class="metric-label">Impact ROI</div>
                            <small class="text-muted">vs 2.14x Financial ROI</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="glass-card text-center">
                            <div class="metric-value animated-number" style="font-size: 2.5rem; color: var(--terminal-blue);">94%</div>
                            <div class="metric-label">Literacy Improvement</div>
                            <small class="text-muted">Above UNESCO targets</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="glass-card text-center">
                            <div class="metric-value animated-number" style="font-size: 2.5rem; color: var(--terminal-purple);">87</div>
                            <div class="metric-label">ESG Score</div>
                            <small class="text-muted">Top 10% globally</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="glass-card text-center">
                            <div class="metric-value animated-number" style="font-size: 2.5rem; color: var(--terminal-gold);">12.5K</div>
                            <div class="metric-label">Teachers Trained</div>
                            <small class="text-muted">Multiplier effect: 285K students</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Opportunity Ripple Tab -->
            <div id="opportunity-ripple" class="tab-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 style="color: var(--terminal-blue);">
                        <i class="fas fa-handshake"></i> Opportunity Ripple
                    </h2>
                    <div>
                        <button class="btn btn-outline-primary me-2">
                            <i class="fas fa-filter"></i> Filter
                        </button>
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i> Add Opportunity Alert
                        </button>
                    </div>
                </div>

                <!-- Opportunity Cards -->
                <div class="row">
                    <div class="col-lg-6 mb-4">
                        <div class="opportunity-card">
                            <div class="opportunity-title">Digital Nigeria Education Initiative</div>
                            <div class="opportunity-description">
                                Partner with Nigeria's Federal Ministry of Education to digitize 2,500 rural schools. 
                                This initiative aligns with your portfolio's focus on teacher training and digital literacy, 
                                offering 200% ROI potential and reaching 850,000 students.
                            </div>
                            <div class="opportunity-metrics">
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">96%</div>
                                    <div class="opportunity-metric-label">Match Score</div>
                                </div>
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">850K</div>
                                    <div class="opportunity-metric-label">Students</div>
                                </div>
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">200%</div>
                                    <div class="opportunity-metric-label">ROI Potential</div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <span class="tag tag-unesco">UNESCO Aligned</span>
                                <span class="tag tag-sfdr">SFDR Article 9</span>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mb-4">
                        <div class="opportunity-card">
                            <div class="opportunity-title">Kenya STEM Girls Expansion</div>
                            <div class="opportunity-description">
                                Scale the successful STEM Sisters program to 15 additional counties in Kenya. 
                                This expansion builds on proven results and offers immediate implementation 
                                with existing infrastructure and partnerships.
                            </div>
                            <div class="opportunity-metrics">
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">94%</div>
                                    <div class="opportunity-metric-label">Match Score</div>
                                </div>
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">45K</div>
                                    <div class="opportunity-metric-label">Girls</div>
                                </div>
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">180%</div>
                                    <div class="opportunity-metric-label">ROI Potential</div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <span class="tag tag-gri">GRI Standards</span>
                                <span class="tag tag-csrd">CSRD Compliant</span>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mb-4">
                        <div class="opportunity-card">
                            <div class="opportunity-title">Climate Education VR Network</div>
                            <div class="opportunity-description">
                                Deploy VR climate education labs across 200 schools in Ghana and Tanzania. 
                                This innovative approach combines education with climate awareness, 
                                creating measurable environmental and social impact.
                            </div>
                            <div class="opportunity-metrics">
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">91%</div>
                                    <div class="opportunity-metric-label">Match Score</div>
                                </div>
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">120K</div>
                                    <div class="opportunity-metric-label">Students</div>
                                </div>
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">165%</div>
                                    <div class="opportunity-metric-label">ROI Potential</div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <span class="tag tag-tcfd">TCFD Aligned</span>
                                <span class="tag tag-unesco">UNESCO SDG 13</span>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mb-4">
                        <div class="opportunity-card">
                            <div class="opportunity-title">Teacher Training Hub Network</div>
                            <div class="opportunity-description">
                                Establish 12 regional teacher training hubs across Sub-Saharan Africa. 
                                Each hub will train 500 teachers annually, creating a multiplier effect 
                                reaching 300,000 students per year.
                            </div>
                            <div class="opportunity-metrics">
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">89%</div>
                                    <div class="opportunity-metric-label">Match Score</div>
                                </div>
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">300K</div>
                                    <div class="opportunity-metric-label">Students/Year</div>
                                </div>
                                <div class="opportunity-metric">
                                    <div class="opportunity-metric-value">220%</div>
                                    <div class="opportunity-metric-label">ROI Potential</div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <span class="tag tag-gri">GRI 413</span>
                                <span class="tag tag-sfdr">Article 9</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Portfolio Tab -->
            <div id="portfolio" class="tab-content">
                <h2 style="color: var(--terminal-blue);" class="mb-4">
                    <i class="fas fa-briefcase"></i> Living Education Portfolio
                </h2>

                <!-- Portfolio Health Indicators -->
                <div class="portfolio-health">
                    <div class="health-indicator healthy">
                        <div class="health-icon">💚</div>
                        <div class="health-value">87%</div>
                        <div class="health-label">Portfolio Health</div>
                    </div>
                    <div class="health-indicator healthy">
                        <div class="health-icon">📈</div>
                        <div class="health-value">+24%</div>
                        <div class="health-label">YoY Growth</div>
                    </div>
                    <div class="health-indicator warning">
                        <div class="health-icon">⚠️</div>
                        <div class="health-value">3</div>
                        <div class="health-label">Risk Alerts</div>
                    </div>
                    <div class="health-indicator healthy">
                        <div class="health-icon">🎯</div>
                        <div class="health-value">94%</div>
                        <div class="health-label">Target Achievement</div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-4 mb-4">
                        <div class="glass-card">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">Teacher Training Initiative</h5>
                                <span class="badge bg-success">Outperforming</span>
                            </div>
                            <p class="text-muted mb-3">Digital literacy training for rural educators across Sub-Saharan Africa</p>
                            <div class="row text-center mb-3">
                                <div class="col-6">
                                    <strong class="text-success">R850M</strong>
                                    <small class="d-block text-muted">AUM</small>
                                </div>
                                <div class="col-6">
                                    <strong class="text-warning">5.8x</strong>
                                    <small class="d-block text-muted">Impact ROI</small>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Performance vs Target:</small>
                                <div class="progress mt-1">
                                    <div class="progress-bar bg-success" style="width: 124%"></div>
                                </div>
                                <small class="text-success">124% of target achieved</small>
                            </div>
                            <div style="filter: blur(2px); opacity: 0.7;">
                                <canvas id="portfolioPreview" width="200" height="120"></canvas>
                            </div>
                            <button class="btn btn-premium mt-3" onclick="showPremiumModal('portfolio-analysis')">
                                Detailed Analysis - $199
                            </button>
                        </div>
                    </div>

                    <div class="col-lg-4 mb-4">
                        <div class="glass-card">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">STEM Girls Program</h5>
                                <span class="badge bg-warning">Scaling</span>
                            </div>
                            <p class="text-muted mb-3">Gender-focused technology education in Nigeria and Kenya</p>
                            <div class="row text-center mb-3">
                                <div class="col-6">
                                    <strong class="text-success">R425M</strong>
                                    <small class="d-block text-muted">AUM</small>
                                </div>
                                <div class="col-6">
                                    <strong class="text-warning">340%</strong>
                                    <small class="d-block text-muted">Growth Rate</small>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Performance vs Target:</small>
                                <div class="progress mt-1">
                                    <div class="progress-bar bg-warning" style="width: 89%"></div>
                                </div>
                                <small class="text-warning">89% of target achieved</small>
                            </div>
                            <div class="text-center">
                                <i class="fas fa-chart-line" style="font-size: 3rem; color: var(--terminal-purple); opacity: 0.3;"></i>
                                <p class="mt-2 text-muted">Expansion phase metrics</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 mb-4">
                        <div class="glass-card">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">Climate Education VR</h5>
                                <span class="badge bg-info">Emerging</span>
                            </div>
                            <p class="text-muted mb-3">Virtual reality climate science curriculum for urban schools</p>
                            <div class="row text-center mb-3">
                                <div class="col-6">
                                    <strong class="text-success">R320M</strong>
                                    <small class="d-block text-muted">AUM</small>
                                </div>
                                <div class="col-6">
                                    <strong class="text-warning">92%</strong>
                                    <small class="d-block text-muted">Engagement</small>
                                </div>
                            </div>
                            <div class="mb-3">
                                <small class="text-muted">Performance vs Target:</small>
                                <div class="progress mt-1">
                                    <div class="progress-bar bg-info" style="width: 67%"></div>
                                </div>
                                <small class="text-info">67% of target achieved</small>
                            </div>
                            <div class="text-center">
                                <i class="fas fa-vr-cardboard" style="font-size: 3rem; color: var(--terminal-green); opacity: 0.3;"></i>
                                <p class="mt-2 text-muted">Early stage innovation</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Portfolio Performance Chart -->
                <div class="glass-card mt-4">
                    <h5 class="text-success mb-3">Portfolio Performance vs Education Index</h5>
                    <canvas id="portfolioChart" height="300" role="img" aria-label="Portfolio performance comparison chart"></canvas>
                </div>

                <!-- Investment Projections -->
                <div class="glass-card mt-4">
                    <h5 class="text-success mb-3">Investment Impact Projections</h5>
                    <div class="row">
                        <div class="col-md-8">
                            <canvas id="projectionChart" role="img" aria-label="Investment impact projections chart"></canvas>
                        </div>
                        <div class="col-md-4">
                            <div class="glass-card">
                                <h6 class="text-warning mb-3">Key Projections</h6>
                                <ul class="list-unstyled">
                                    <li class="mb-2">
                                        <i class="fas fa-arrow-up text-success me-2"></i>
                                        <strong>450K students</strong> by 2025
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-chart-line text-warning me-2"></i>
                                        <strong>6.2x Impact ROI</strong> projected
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-globe text-info me-2"></i>
                                        <strong>8 countries</strong> expansion
                                    </li>
                                    <li class="mb-2">
                                        <i class="fas fa-graduation-cap text-purple me-2"></i>
                                        <strong>18K teachers</strong> trained
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <h2 style="color: var(--terminal-blue);" class="mb-4">
                    <i class="fas fa-brain"></i> AI-Powered Education Analytics
                </h2>

                <div class="row">
                    <div class="col-lg-8">
                        <div class="glass-card">
                            <h5 class="text-success mb-3">Predictive Impact Modeling</h5>
                            <p class="mb-3">
                                Our AI models predict that increasing teacher training capacity by 35% could 
                                generate an additional 45,000 educated students while improving literacy 
                                rates by 18% across your portfolio.
                            </p>
                            
                            <!-- What-If Analysis -->
                            <div class="what-if-analysis">
                                <h6 class="text-warning">What-If Scenario Analysis</h6>
                                <div class="row">
                                    <div class="col-md-4">
                                        <label>Investment Amount (R)</label>
                                        <input type="range" class="form-range" min="500000" max="10000000" value="2400000" id="investmentSlider">
                                        <span id="investmentValue">R2.4M</span>
                                    </div>
                                    <div class="col-md-4">
                                        <label>Focus Area</label>
                                        <select class="form-select" id="focusArea">
                                            <option>Teacher Training</option>
                                            <option>Digital Literacy</option>
                                            <option>STEM Education</option>
                                            <option>Early Childhood</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label>Projected Impact</label>
                                        <div class="impact-projection">
                                            <span id="projectedStudents" class="text-success">285K</span>
                                            <small class="d-block text-muted">Students Reached</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="glass-card">
                            <h5 class="text-success mb-3">Key Insights</h5>
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <i class="fas fa-arrow-up text-success me-2"></i>
                                    Teacher training ROI up 340% since 2021
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-chart-line text-warning me-2"></i>
                                    Digital literacy demand growing 45% annually
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-globe text-info me-2"></i>
                                    Africa leads in mobile learning adoption
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-lightbulb text-yellow me-2"></i>
                                    VR education breakthrough potential
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Education Impact Chart -->
                <div class="glass-card mt-4">
                    <h5 class="text-success mb-3">Education Impact Trends with AI Projections</h5>
                    <canvas id="impactTrendsChart" height="300" role="img" aria-label="Education impact trends with AI projections"></canvas>
                </div>
            </div>

            <!-- Leaderboard Tab -->
            <div id="leaderboard" class="tab-content">
                <h2 style="color: var(--terminal-blue);" class="mb-4">
                    <i class="fas fa-trophy"></i> Education Impact Leaderboard
                </h2>

                <div class="row mb-4">
                    <div class="col-md-8">
                        <div class="glass-card">
                            <h5 class="text-warning mb-3">Your Competitive Position</h5>
                            <div class="row text-center">
                                <div class="col-md-3">
                                    <div class="rank-badge rank-3">3</div>
                                    <div class="mt-2">
                                        <strong>Overall Rank</strong>
                                        <small class="d-block text-muted">out of 12 ESG Education Funds</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="metric-value" style="color: var(--terminal-green);">87</div>
                                    <div class="mt-2">
                                        <strong>ESG Score</strong>
                                        <small class="d-block text-muted">Top 10% globally</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="metric-value" style="color: var(--terminal-blue);">5.8x</div>
                                    <div class="mt-2">
                                        <strong>Impact ROI</strong>
                                        <small class="d-block text-muted">vs 3.2x peer average</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="metric-value" style="color: var(--terminal-purple);">285K</div>
                                    <div class="mt-2">
                                        <strong>Lives Impacted</strong>
                                        <small class="d-block text-muted">vs 180K peer average</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="glass-card">
                            <h5 class="text-success mb-3">Improvement Opportunities</h5>
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <i class="fas fa-arrow-up text-warning me-2"></i>
                                    Increase teacher training scale (+25%)
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-globe text-info me-2"></i>
                                    Expand to Ghana market
                                </li>
                                <li class="mb-2">
                                    <i class="fas fa-chart-line text-success me-2"></i>
                                    Add VR technology integration
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Leaderboard Table -->
                <div class="leaderboard-table">
                    <table class="table table-dark table-hover">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Organization</th>
                                <th>Impact Score</th>
                                <th>ESG Rating</th>
                                <th>Students Reached</th>
                                <th>Impact ROI</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="rank-badge rank-1">1</span></td>
                                <td>Mastercard Foundation</td>
                                <td>94</td>
                                <td>A+</td>
                                <td>450K</td>
                                <td>6.2x</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-2">2</span></td>
                                <td>Jacobs Foundation</td>
                                <td>91</td>
                                <td>A+</td>
                                <td>320K</td>
                                <td>5.9x</td>
                            </tr>
                            <tr style="background: rgba(0, 212, 255, 0.1);">
                                <td><span class="rank-badge rank-3">3</span></td>
                                <td><strong>Your Organization</strong></td>
                                <td>87</td>
                                <td>A</td>
                                <td>285K</td>
                                <td>5.8x</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-other">4</span></td>
                                <td>Varkey Foundation</td>
                                <td>84</td>
                                <td>A</td>
                                <td>240K</td>
                                <td>4.8x</td>
                            </tr>
                            <tr>
                                <td><span class="rank-badge rank-other">5</span></td>
                                <td>Dubai Cares</td>
                                <td>82</td>
                                <td>A-</td>
                                <td>210K</td>
                                <td>4.2x</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Collaboration Tab -->
            <div id="collaboration" class="tab-content">
                <h2 style="color: var(--terminal-blue);" class="mb-4">
                    <i class="fas fa-users"></i> Collaboration Zone
                </h2>
                <div class="glass-card">
                    <p class="text-center text-muted">Collaboration and partnership features coming soon...</p>
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="reports" class="tab-content">
                <h2 style="color: var(--terminal-blue);" class="mb-4">
                    <i class="fas fa-file-alt"></i> Education Impact Intelligence Reports
                </h2>

                <div class="row">
                    <!-- Free Report -->
                    <div class="col-lg-6 mb-4">
                        <div class="report-card">
                            <div class="d-flex justify-content-between align-items-start mb-4">
                                <div style="font-size: 2.5rem;">📚</div>
                                <span class="badge bg-success">Free</span>
                            </div>
                            <h3 class="report-title">Global Education Outlook</h3>
                            <p class="report-description">Comprehensive analysis of education trends, policy impacts, and investment opportunities across emerging markets</p>
                            <div class="mb-3">
                                <span class="tag tag-unesco">UNESCO</span>
                                <span class="tag tag-gri">GRI</span>
                            </div>
                            <button class="btn btn-primary" onclick="downloadFreeReport()">Download Report</button>
                        </div>
                    </div>

                    <!-- Premium Reports -->
                    <div class="col-lg-6 mb-4">
                        <div class="report-card" onclick="generateReport('impact_assessment')">
                            <div class="d-flex justify-content-between align-items-start mb-4">
                                <div style="font-size: 2.5rem;">💡</div>
                                <span class="premium-badge">$149</span>
                            </div>
                            <h3 class="report-title">Impact Assessment Report</h3>
                            <p class="report-description">Detailed analysis of your education portfolio's social and economic impact with ROI calculations</p>
                            <div class="mb-3">
                                <span class="tag tag-sfdr">SFDR</span>
                                <span class="tag tag-tcfd">TCFD</span>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mb-4">
                        <div class="report-card" onclick="generateReport('scalability_analysis')">
                            <div class="d-flex justify-content-between align-items-start mb-4">
                                <div style="font-size: 2.5rem;">📈</div>
                                <span class="premium-badge">$399</span>
                            </div>
                            <h3 class="report-title">Scalability & Growth Analysis</h3>
                            <p class="report-description">Strategic expansion opportunities with 3-year growth projections and market analysis</p>
                            <div class="mb-3">
                                <span class="tag tag-gri">GRI</span>
                                <span class="tag tag-unesco">UNESCO</span>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mb-4">
                        <div class="report-card" onclick="generateReport('roi_assessment')">
                            <div class="d-flex justify-content-between align-items-start mb-4">
                                <div style="font-size: 2.5rem;">💰</div>
                                <span class="premium-badge">$499</span>
                            </div>
                            <h3 class="report-title">Risk-Adjusted ROI Assessment</h3>
                            <p class="report-description">Comprehensive financial and impact ROI analysis with risk modeling and scenario planning</p>
                            <div class="mb-3">
                                <span class="tag tag-tcfd">TCFD</span>
                                <span class="tag tag-csrd">CSRD</span>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mb-4">
                        <div class="report-card" onclick="generateReport('esg_scorecard')">
                            <div class="d-flex justify-content-between align-items-start mb-4">
                                <div style="font-size: 2.5rem;">📊</div>
                                <span class="premium-badge">$349</span>
                            </div>
                            <h3 class="report-title">ESG Scorecard</h3>
                            <p class="report-description">Dashboard-ready scorecard with E-S-G metrics and radar charts for stakeholder reporting</p>
                            <div class="mb-3">
                                <span class="tag tag-esg">E-S-G</span>
                                <span class="tag tag-benchmarked">Benchmarked</span>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 mb-4">
                        <div class="report-card" onclick="generateReport('regulatory_compliance')">
                            <div class="d-flex justify-content-between align-items-start mb-4">
                                <div style="font-size: 2.5rem;">⚖️</div>
                                <span class="premium-badge">$499</span>
                            </div>
                            <h3 class="report-title">Regulatory Compliance</h3>
                            <p class="report-description">Ensure SFDR/CSRD compliance with gap analyses and disclosure templates</p>
                            <div class="mb-3">
                                <span class="tag tag-sfdr">SFDR</span>
                                <span class="tag tag-ifrs">IFRS</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Report Generation Status -->
    <div id="report-status">
        <div class="report-status-content">
            <div class="ai-thinking">🤖</div>
            <div class="countdown-timer" id="countdown-timer">45</div>
            <p id="status-message" class="text-xl mb-4">Generating your report...</p>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <p class="text-sm text-gray-500 mt-4">Using NanoGPT-5 AI • Please wait</p>
        </div>
    </div>

    <!-- Premium Modal -->
    <div id="premiumModal" class="premium-modal">
        <div class="premium-modal-content">
            <div class="premium-lock-icon">🔒</div>
            <h3 style="color: var(--terminal-blue); margin-bottom: 1rem;">Premium Feature</h3>
            <p class="mb-3">Unlock detailed analytics and insights with our premium subscription.</p>
            <div class="mb-3">
                <strong>Premium includes:</strong>
                <ul class="text-start mt-2">
                    <li>Advanced portfolio analytics</li>
                    <li>AI-powered predictions</li>
                    <li>Custom report generation</li>
                    <li>Priority support</li>
                </ul>
            </div>
            <button class="btn btn-premium mb-2" onclick="subscribePremium()">
                Upgrade to Premium - $99/month
            </button>
            <br>
            <button class="btn btn-outline-secondary" onclick="closePremiumModal()">
                Maybe Later
            </button>
        </div>
    </div>

    <!-- Profile Completion Modal -->
    <div class="modal fade" id="profileModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Complete Your ESG Education Profile</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="progress mb-4">
                        <div class="progress-bar bg-primary" style="width: 65%"></div>
                    </div>
                    <p class="mb-4">Complete your profile to unlock personalized impact stories, tailored opportunity ripple, and customized reports that match your investment focus.</p>
                   
                    <form id="profileForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Organization Name *</label>
                                <input type="text" class="form-control" id="orgName" placeholder="e.g., Gates Foundation">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Organization Type *</label>
                                <select class="form-select" id="orgType">
                                    <option value="">Select type...</option>
                                    <option value="foundation">Foundation</option>
                                    <option value="fund">Impact Donor Fund</option>
                                    <option value="ngo">NGO</option>
                                    <option value="government">Government Agency</option>
                                    <option value="corporate">Corporate</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Website URL</label>
                                <input type="url" class="form-control" id="websiteUrl" placeholder="https://your-organization.org">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Primary Geography *</label>
                                <select class="form-select" id="primaryGeo">
                                    <option value="">Select region...</option>
                                    <option value="south-africa">South Africa</option>
                                    <option value="nigeria">Nigeria</option>
                                    <option value="kenya">Kenya</option>
                                    <option value="ghana">Ghana</option>
                                    <option value="africa">Sub-Saharan Africa</option>
                                    <option value="global">Global</option>
                                </select>
                            </div>
                            <div class="col-md-12 mb-3">
                                <label class="form-label">Education Focus Areas *</label>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="earlyChildhood">
                                            <label class="form-check-label" for="earlyChildhood">Early Childhood</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="primaryEducation">
                                            <label class="form-check-label" for="primaryEducation">Primary Education</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="secondaryEducation">
                                            <label class="form-check-label" for="secondaryEducation">Secondary Education</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="vocationalTraining">
                                            <label class="form-check-label" for="vocationalTraining">Vocational Training</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="teacherTraining">
                                            <label class="form-check-label" for="teacherTraining">Teacher Training</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="digitalLiteracy">
                                            <label class="form-check-label" for="digitalLiteracy">Digital Literacy</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="stemEducation">
                                            <label class="form-check-label" for="stemEducation">STEM Education</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="genderEquity">
                                            <label class="form-check-label" for="genderEquity">Gender Equity</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="adultLiteracy">
                                            <label class="form-check-label" for="adultLiteracy">Adult Literacy</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Later</button>
                    <button type="button" class="btn btn-primary" onclick="saveProfile()">Save Profile</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript -->
    <script>
        let fontSize = 16;
        let currentTab = 'overview';
        let charts = {};
        
        // Accessibility Functions
        function toggleHighContrast() {
            document.body.classList.toggle('high-contrast');
            localStorage.setItem('highContrast', document.body.classList.contains('high-contrast'));
        }
        
        function increaseFontSize() {
            fontSize += 2;
            document.body.style.fontSize = fontSize + 'px';
            localStorage.setItem('fontSize', fontSize);
        }
        
        function decreaseFontSize() {
            if (fontSize > 12) {
                fontSize -= 2;
                document.body.style.fontSize = fontSize + 'px';
                localStorage.setItem('fontSize', fontSize);
            }
        }

        // Load saved accessibility preferences
        function loadAccessibilityPreferences() {
            const savedContrast = localStorage.getItem('highContrast');
            const savedFontSize = localStorage.getItem('fontSize');
            
            if (savedContrast === 'true') {
                document.body.classList.add('high-contrast');
            }
            
            if (savedFontSize) {
                fontSize = parseInt(savedFontSize);
                document.body.style.fontSize = fontSize + 'px';
            }
        }

        // Tab Navigation
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked nav item
            event.target.closest('.nav-item').classList.add('active');
            
            currentTab = tabName;
            
            // Trigger chart resize if needed
            setTimeout(() => {
                Object.values(charts).forEach(chart => {
                    if (chart && typeof chart.resize === 'function') {
                        chart.resize();
                    }
                });
            }, 100);
        }

        // Profile Modal
        function showProfileModal() {
            const modal = new bootstrap.Modal(document.getElementById('profileModal'));
            modal.show();
        }

        function saveProfile() {
            // Collect form data
            const profileData = {
                orgName: document.getElementById('orgName').value,
                orgType: document.getElementById('orgType').value,
                websiteUrl: document.getElementById('websiteUrl').value,
                primaryGeo: document.getElementById('primaryGeo').value,
                focusAreas: []
            };
            
            // Collect focus areas
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                profileData.focusAreas.push(checkbox.id);
            });
            
            // Save to localStorage (in production, send to backend)
            localStorage.setItem('userProfile', JSON.stringify(profileData));
            
            // Update UI
            bootstrap.Modal.getInstance(document.getElementById('profileModal')).hide();
            document.getElementById('profileCompletion').textContent = 'Profile: 100% Complete';
            
            // Personalize content
            personalizeContent(profileData);
        }

        function personalizeContent(profile) {
            // Update organization-specific content
            if (profile.orgName) {
                document.querySelectorAll('.org-placeholder').forEach(element => {
                    element.textContent = element.textContent.replace('Gates Foundation', profile.orgName);
                });
            }
        }

        // Story Audio Playback
        function playStoryAudio(storyId) {
            // Audio playback logic here
            console.log('Playing audio for story:', storyId);
            // Show loading state
            const storyCard = event.target.closest('.story-card');
            const playIcon = storyCard.querySelector('.fa-play-circle');
            playIcon.className = 'fas fa-pause-circle';
            
            // Simulate audio playback
            setTimeout(() => {
                playIcon.className = 'fas fa-play-circle';
            }, 3000);
        }

        // Premium Modal
        function showPremiumModal(reportType) {
            document.getElementById('premiumModal').style.display = 'flex';
        }

        function closePremiumModal() {
            document.getElementById('premiumModal').style.display = 'none';
        }

        function subscribePremium() {
            // Integrate with Paystack
            const handler = PaystackPop.setup({
                key: 'pk_test_your_paystack_public_key', // Replace with your public key
                email: 'user@example.com',
                amount: 9900 * 100, // Amount in kobo
                currency: 'ZAR',
                callback: function(response) {
                    // Payment successful
                    console.log('Payment successful:', response);
                    closePremiumModal();
                    // Unlock premium features
                },
                onClose: function() {
                    console.log('Payment cancelled');
                }
            });
            handler.openIframe();
        }

        // Report Generation
        function generateReport(reportType) {
            document.getElementById('report-status').style.display = 'flex';
            
            let countdown = 45;
            const timer = setInterval(() => {
                countdown--;
                document.getElementById('countdown-timer').textContent = countdown;
                document.getElementById('progress-bar').style.width = ((45 - countdown) / 45 * 100) + '%';
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    document.getElementById('report-status').style.display = 'none';
                    // Show download link or redirect to report
                    alert('Report generated successfully! Download link sent to your email.');
                }
            }, 1000);
        }

        function downloadFreeReport() {
            // Trigger free report download
            console.log('Downloading free report...');
            // In production, this would trigger an actual download
        }

        // What-if analysis interactivity
        function initializeWhatIfAnalysis() {
            const investmentSlider = document.getElementById('investmentSlider');
            const investmentValue = document.getElementById('investmentValue');
            const projectedStudents = document.getElementById('projectedStudents');
            const focusArea = document.getElementById('focusArea');
            
            if (investmentSlider) {
                investmentSlider.addEventListener('input', function() {
                    const value = this.value;
                    investmentValue.textContent = `R${(value/1000000).toFixed(1)}M`;
                    
                    // Calculate projected students based on focus area
                    let multiplier = 0.12; // Default for teacher training
                    
                    switch(focusArea.value) {
                        case 'Digital Literacy':
                            multiplier = 0.15;
                            break;
                        case 'STEM Education':
                            multiplier = 0.08;
                            break;
                        case 'Early Childhood':
                            multiplier = 0.20;
                            break;
                    }
                    
                    const students = Math.round(value * multiplier);
                    projectedStudents.textContent = `${(students/1000).toFixed(0)}K`;
                });
                
                focusArea.addEventListener('change', function() {
                    // Trigger recalculation
                    investmentSlider.dispatchEvent(new Event('input'));
                });
            }
        }

        function updateTimestamp() {
            const now = new Date();
            const timestamp = document.getElementById('timestamp');
            if (timestamp) {
                timestamp.innerHTML = `Last updated: ${now.toISOString().replace('T', ' ').substr(0, 19)} UTC <span class="live-indicator"></span>`;
            }
        }

        function initializeCharts() {
            // Region Chart
            const regionCtx = document.getElementById('regionChart');
            if (regionCtx) {
                charts.regionChart = new Chart(regionCtx, {
                    type: 'bar',
                    data: {
                        labels: ['South Africa', 'Nigeria', 'Kenya', 'Ghana', 'Other'],
                        datasets: [{
                            label: 'Students Reached (Thousands)',
                            data: [85, 67, 52, 41, 40],
                            backgroundColor: [
                                'rgba(0, 212, 255, 0.7)',
                                'rgba(139, 92, 246, 0.7)',
                                'rgba(0, 255, 136, 0.7)',
                                'rgba(255, 215, 0, 0.7)',
                                'rgba(255, 64, 0, 0.7)'
                            ],
                            borderColor: [
                                '#00d4ff',
                                '#8b5cf6',
                                '#00ff88',
                                '#ffd700',
                                '#ff4000'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { 
                                display: false 
                            },
                            title: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                },
                                grid: { 
                                    color: 'rgba(255, 255, 255, 0.1)',
                                    borderColor: 'rgba(255, 255, 255, 0.2)'
                                }
                            },
                            x: {
                                ticks: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                },
                                grid: { 
                                    color: 'rgba(255, 255, 255, 0.1)',
                                    borderColor: 'rgba(255, 255, 255, 0.2)'
                                }
                            }
                        }
                    }
                });
            }

            // ROI Chart
            const roiCtx = document.getElementById('roiChart');
            if (roiCtx) {
                charts.roiChart = new Chart(roiCtx, {
                    type: 'line',
                    data: {
                        labels: ['2022', '2023', '2024', '2025 (Proj)', '2026 (Proj)'],
                        datasets: [{
                            label: 'Impact ROI',
                            data: [3.2, 4.1, 5.8, 6.8, 7.2],
                            borderColor: '#00ff88',
                            backgroundColor: 'rgba(0, 255, 136, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointBackgroundColor: '#00ff88',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2
                        }, {
                            label: 'Financial ROI',
                            data: [1.8, 2.0, 2.14, 2.3, 2.5],
                            borderColor: '#00d4ff',
                            backgroundColor: 'rgba(0, 212, 255, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointBackgroundColor: '#00d4ff',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                },
                                grid: { 
                                    color: 'rgba(255, 255, 255, 0.1)',
                                    borderColor: 'rgba(255, 255, 255, 0.2)'
                                }
                            },
                            x: {
                                ticks: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                },
                                grid: { 
                                    color: 'rgba(255, 255, 255, 0.1)',
                                    borderColor: 'rgba(255, 255, 255, 0.2)'
                                }
                            }
                        }
                    }
                });
            }

            // Impact Trends Chart
            const trendsCtx = document.getElementById('impactTrendsChart');
            if (trendsCtx) {
                charts.impactTrendsChart = new Chart(trendsCtx, {
                    type: 'line',
                    data: {
                        labels: ['2020', '2021', '2022', '2023', '2024', '2025 (AI)', '2026 (AI)'],
                        datasets: [{
                            label: 'Students Reached (K)',
                            data: [120, 145, 180, 220, 285, 350, 420],
                            borderColor: '#00d4ff',
                            backgroundColor: 'rgba(0, 212, 255, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointBackgroundColor: '#00d4ff',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2
                        }, {
                            label: 'AI Projection',
                            data: [null, null, null, null, 285, 350, 420],
                            borderColor: '#8b5cf6',
                            borderDash: [5, 5],
                            tension: 0.4,
                            pointBackgroundColor: '#8b5cf6',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                },
                                grid: { 
                                    color: 'rgba(255, 255, 255, 0.1)',
                                    borderColor: 'rgba(255, 255, 255, 0.2)'
                                }
                            },
                            x: {
                                ticks: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                },
                                grid: { 
                                    color: 'rgba(255, 255, 255, 0.1)',
                                    borderColor: 'rgba(255, 255, 255, 0.2)'
                                }
                            }
                        }
                    }
                });
            }

            // Portfolio Chart
            const portfolioCtx = document.getElementById('portfolioChart');
            if (portfolioCtx) {
                charts.portfolioChart = new Chart(portfolioCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct'],
                        datasets: [{
                            label: 'Portfolio Performance (%)',
                            data: [12.5, 14.2, 16.8, 18.1, 19.5, 21.2, 22.8, 24.1, 25.6, 26.9],
                            borderColor: '#00ff88',
                            backgroundColor: 'rgba(0, 255, 136, 0.1)',
                            tension: 0.4,
                            fill: true,
                            pointBackgroundColor: '#00ff88',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2
                        }, {
                            label: 'Education Index',
                            data: [10.2, 11.5, 12.8, 14.1, 15.2, 16.8, 17.9, 18.5, 19.2, 20.1],
                            borderColor: '#00d4ff',
                            backgroundColor: 'rgba(0, 212, 255, 0.1)',
                            tension: 0.4,
                            fill: false,
                            pointBackgroundColor: '#00d4ff',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                ticks: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                },
                                grid: { 
                                    color: 'rgba(255, 255, 255, 0.1)',
                                    borderColor: 'rgba(255, 255, 255, 0.2)'
                                }
                            },
                            x: {
                                ticks: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                },
                                grid: { 
                                    color: 'rgba(255, 255, 255, 0.1)',
                                    borderColor: 'rgba(255, 255, 255, 0.2)'
                                }
                            }
                        }
                    }
                });
            }

            // Projection Chart
            const projectionCtx = document.getElementById('projectionChart');
            if (projectionCtx) {
                charts.projectionChart = new Chart(projectionCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Current', '2025 Target', '2026 Projection'],
                        datasets: [{
                            label: 'Students Reached',
                            data: [285000, 450000, 620000],
                            backgroundColor: [
                                'rgba(0, 212, 255, 0.7)',
                                'rgba(139, 92, 246, 0.7)',
                                'rgba(0, 255, 136, 0.7)'
                            ],
                            borderColor: [
                                '#00d4ff',
                                '#8b5cf6',
                                '#00ff88'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { 
                                display: false 
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: { 
                                    color: '#ffffff',
                                    font: { size: 12 },
                                    callback: function(value) {
                                        return (value/1000) + 'K';
                                    }
                                },
                                grid: { 
                                    color: 'rgba(255, 255, 255, 0.1)',
                                    borderColor: 'rgba(255, 255, 255, 0.2)'
                                }
                            },
                            x: {
                                ticks: { 
                                    color: '#ffffff',
                                    font: { size: 12 }
                                },
                                grid: { 
                                    color: 'rgba(255, 255, 255, 0.1)',
                                    borderColor: 'rgba(255, 255, 255, 0.2)'
                                }
                            }
                        }
                    }
                });
            }
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Load accessibility preferences
            loadAccessibilityPreferences();
            
            // Initialize charts
            initializeCharts();
            
            // Initialize what-if analysis
            initializeWhatIfAnalysis();
            
            // Update timestamp
            updateTimestamp();
            setInterval(updateTimestamp, 30000);
            
            // Load saved profile
            const savedProfile = localStorage.getItem('userProfile');
            if (savedProfile) {
                const profile = JSON.parse(savedProfile);
                personalizeContent(profile);
                document.getElementById('profileCompletion').textContent = 'Profile: 100% Complete';
            }
            
            // Animate numbers on load
            animateNumbers();
            
            // Show profile completion nudge after 10 seconds if not completed
            setTimeout(() => {
                const profileCompletion = document.getElementById('profileCompletion').textContent;
                if (profileCompletion.includes('65%')) {
                    showProfileModal();
                }
            }, 10000);
        });

        function animateNumbers() {
            const numbers = document.querySelectorAll('.animated-number');
            numbers.forEach(number => {
                const target = parseInt(number.textContent.replace(/[^\d]/g, ''));
                let current = 0;
                const increment = target / 50;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    
                    if (number.textContent.includes('K')) {
                        number.textContent = (current/1000).toFixed(1) + 'K';
                    } else if (number.textContent.includes('x')) {
                        number.textContent = current.toFixed(1) + 'x';
                    } else if (number.textContent.includes('%')) {
                        number.textContent = Math.round(current) + '%';
                    } else {
                        number.textContent = Math.round(current).toLocaleString();
                    }
                }, 50);
            });
        }

        // Keyboard navigation support
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Tab') {
                // Ensure tab navigation works properly
                document.body.classList.add('keyboard-navigation');
            }
            
            if (e.altKey && e.key >= '1' && e.key <= '7') {
                // Alt + number for tab navigation
                const tabIndex = parseInt(e.key) - 1;
                const tabs = ['overview', 'opportunity-ripple', 'portfolio', 'analytics', 'leaderboard', 'collaboration', 'reports'];
                if (tabs[tabIndex]) {
                    showTab(tabs[tabIndex]);
                }
            }
        });

        // Remove keyboard navigation class when mouse is used
        document.addEventListener('mousedown', function() {
            document.body.classList.remove('keyboard-navigation');
        });
    </script>
    
    <!-- Enhanced Framework Integration -->
    <script src="esg_leaderboard_system.js"></script>
    <script src="esg_enhanced_framework.js"></script>
    <script src="ai_dashboard_administrator.js"></script>
</body>
</html>
